<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>QUnit: New test cases</title>
<link rel="stylesheet" href="../../lib/qunit-1.11.0.css">
</head>
<body>
<div id="qunit"></div>
<div id="qunit-fixture"></div>

<script src="../../lib/qunit-1.11.0.js"></script>
<script src="../../lib/jquery-1.9.js"></script>

<script src="../../../hotjs/hotjs.js"></script>
<script src="../../../hotjs/resource.js"></script>
<script src="../../../hotjs/math.js"></script>
<script src="../../../hotjs/canvas.js"></script>
<script src="../../../hotjs/social.js"></script>
<script src="../../../hotjs/ai.js"></script>
<script src='ai_go.js'></script>
<script>

module('GomokuAI');

test('AI of Gomoku game', function(){
	var g = new GomokuAI();
	var pts = g.genPattern();
	equal( pts.length, 32, 'generate 32 patterns.' );

	var str = '11011';
	equal( str.charAt(2), '0', 'string chatAt(2) is 0');
	equal( str[2], '0', 'str[2] is 0');
	equal( str.indexOf('1'), 0, 'str.indexOf(s) -> 0' );
	equal( str.indexOf('1',-1), 0, 'str.indexOf(s,-1) -> 0' );
	equal( str.indexOf('1',2), 3, 'str.indexOf(s,2) -> 3' );
	equal( Math.pow(2,4), 16, '2^4 = 16');
	
	g.initPattern();
	//hotjs.Matrix.log( g.patterns );
	
	g.setColor(2);
	//hotjs.Matrix.log( g.patterns );
	
	equal( g.patterns.length, 32, 'totally 32 patterns, exclude 00000' );

	var puzzle = '...............|'
				+'...............|'
				+'...............|'
				+'...............|'
				+'.....111.......|'
				+'......22.......|'
				+'.....1..212....|'
				+'.....21212.....|'
				+'......212......|'
				+'......12.......|'
				+'......2........|'
				+'...............|'
				+'...............|'
				+'...............|'
				+'...............'
				;
    var mtx = new hotjs.AI.Matrix();
    mtx.importDataFromString( puzzle );
    str = hotjs.Matrix.toString( mtx.getData() );
    ok(true, 'puzzle loaded: ' + str );

    var tstart = Date.now();
    //for(var i=0; i<100; i++) {
	var s = g.solve( puzzle );
	console.log( s.bestMove );
	console.log( s.myWinHits.length, s.myWinHits );
	console.log( s.peerWinHits.length, s.peerWinHits );
    //}
	var delta = Date.now() - tstart;
	var delta_str = 'time used: ' + delta + ' ms';
	ok( true, delta_str );
	console.log( delta_str );
	
});

	</script>
</body>
</html>
