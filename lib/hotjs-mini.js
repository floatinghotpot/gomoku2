var hotjs=hotjs||{};(function(){hotjs.version=1;function a(){var g=navigator.userAgent;if(g.indexOf("Chrome")>-1){return"Chrome"}else{if(g.indexOf("Firefox")>-1){return"Firefox"}else{if(g.indexOf("MSIE")>-1){return"MSIE"}else{if(g.indexOf("Safari")>-1){return"Safari"}else{if(g.indexOf("Opera")>-1){return"Opera"}else{return"others"}}}}}}var f=function(){var g=a();var i=navigator.userAgent;if(g=="Chrome"){return i.split("Chrome/")[1].split(" ")[0]}else{if(g=="Firefox"){return i.split("Firefox/")[1].split(" ")[0]}else{if(g=="Opera"||g=="Safari "){return i.split("Version/")[1].split(" ")[0]}else{if(g=="MSIE"){return i.split("MSIE ")[1].split(" ")[0]}}}}return"0"};hotjs.agentType=a();hotjs.agentVersion=f();hotjs.agentVersionInt=parseInt(f().split(".")[0],10);hotjs.this_file=function(){switch(hotjs.agentType){case"MSIE":if(hotjs.agentVersionInt<10){return""}try{throw new Error()}catch(i){return i.stack.split("\n")[2].split("(")[1].split(":").slice(0,-2).join(":")}break;case"Chrome":try{throw new Error()}catch(i){var g=i.stack.split("\n")[2];if(g.indexOf("(")>-1){return g.split("(")[1].split(":").slice(0,-2).join(":")}else{return g.split("at ")[1].split(":").slice(0,-2).join(":")}}break;case"Firefox":case"Opera":try{throw new Error()}catch(i){return i.stack.split("\n")[1].split("@")[1].split(":").slice(0,-1).join(":")}case"Safari":return""}return""};hotjs.inherit=function(i,g,l){function j(){}j.prototype=g.prototype;i.prototype=new j();i.prototype.constructor=i;i.supClass=g.prototype;i.supClass.constructor=g;for(var k in l){if(l.hasOwnProperty(k)&&k!=="prototype"){i.prototype[k]=l[k]}}};hotjs.base=function(l,g,r){var j=arguments.callee.caller;if(j.supClass){var i=Array.prototype.slice.call(arguments,1);var m=j.supClass.constructor;return m.apply(l,i)}var i=Array.prototype.slice.call(arguments,2);var q=false;for(var k=l.constructor;k;k=k.supClass&&k.supClass.constructor){if(k.prototype[g]===j){q=true}else{if(q){return k.prototype[g].apply(l,i)}}}if(l[g]===j){return l.constructor.prototype[g].apply(l,i)}else{throw Error("hotjs.base must be called in constructor")}};hotjs.log=function(l,m){if(typeof m=="undefined"){m=0}var j="";for(var g=0;g<m;g++){j+="  "}if(typeof l=="object"){console.log(j+typeof l+" {");for(var k in l){if(typeof l[k]=="object"){console.log(j+"  "+k+" ("+typeof l[k]+") = ");hotjs.log(l[k],m+1)}else{console.log(j+"  "+k+" ("+typeof l[k]+") = "+l[k])}}console.log(j+"}")}else{console.log(l)}};if(typeof Array.prototype.indexOf!=="function"){Array.prototype.indexOf=function(m,l){if(l==null||l==undefined){l=0}else{if(l<0){l=Math.max(0,this.length+l)}}for(var k=l,g=this.length;k<g;k++){if(this[k]===m){return k}}return -1}}if(typeof String.prototype.endsWith!=="function"){String.prototype.endsWith=function(g){return this.indexOf(g,this.length-g.length)!==-1}}hotjs.formatString=function(){var m=[];for(var k=0,g=arguments.length;k<g;k++){m.push(arguments[k])}var j=m[0];m.shift();return j.replace(/\{(\d+)\}/g,function(i,l){return m[l]})};hotjs.formatNumber=function(g,j){var i=""+g;while(i.length<j){i="0"+i}return i};hotjs.getFileName=function(g){return g.substring(g.lastIndexOf("/")+1)};hotjs.getDirPath=function(g){return g.substring(0,g.lastIndexOf("/"))};hotjs.getAbsPath=function(i,g){if(i.indexOf("://")>-1){return i}d=hotjs.getDirPath(g);do{if(i.substring(0,2)=="./"){i=i.substring(2);continue}if(d.length==0){break}if(i.substring(0,3)=="../"){i=i.substring(3);d=hotjs.getDirPath(d);continue}if(d.length>0){i=d+"/"+i;break}}while(1);return i};hotjs.require=function(m){var q=document,k="script";var j=q.getElementsByTagName(k);var l=j[j.length-1].src;m=hotjs.getAbsPath(m,l);for(var g=0;g<j.length;g++){if(j[g].src==m){return}}o=q.createElement(k);o.async=0;o.src=m;j[0].parentNode.insertBefore(o,j[0])};if(typeof requireScripts=="function"){hotjs.require=requireScripts}else{requireScripts=hotjs.require}var e=function(){this.elements=new Array();this.size=function(){return this.elements.length};this.isEmpty=function(){return(this.elements.length<1)};this.clear=function(){this.elements=new Array()};this.put=function(k,g){var l=false;for(var j=0;j<this.elements.length;j++){if(this.elements[j].key==k){l=true;this.elements[j].value=g;break}}if(l==false){this.elements.push({key:k,value:g})}};this.remove=function(j){var l=false;try{for(var g=0;g<this.elements.length;g++){if(this.elements[g].key==j){this.elements.splice(g,1);return true}}}catch(k){l=false}return l};this.get=function(j){try{for(var g=0;g<this.elements.length;g++){if(this.elements[g].key==j){return this.elements[g].value}}}catch(k){return null}};this.element=function(g){if(g<0||g>=this.elements.length){return null}return this.elements[g]};this.containsKey=function(j){var l=false;try{for(var g=0;g<this.elements.length;g++){if(this.elements[g].key==j){l=true;break}}}catch(k){l=false}return l};this.containsValue=function(g){var l=false;try{for(var j=0;j<this.elements.length;j++){if(this.elements[j].value==g){l=true;break}}}catch(k){l=false}return l};this.values=function(){var g=new Array();for(var j=0;j<this.elements.length;j++){g.push(this.elements[j].value)}return g};this.keys=function(){var g=new Array();for(var j=0;j<this.elements.length;j++){g.push(this.elements[j].key)}return g}};var c=0;hotjs.Class=function(){c++;this.oid=c};hotjs.Class.prototype={getObjectNumber:function(){return c},addNode:function(g,i){return this},setContainer:function(g){this.container=g;return this},addTo:function(g,i){this.setContainer(g);g.addNode(this,i);return this}};var b=function(){hotjs.base(this);this.res=[];this.modules=[]};hotjs.inherit(b,hotjs.Class,{init:function(){},exit:function(){},addRes:function(g){this.res.push(g);return this},getRes:function(){return this.res},addNode:function(g){this.modules.push(g);return this},start:function(){for(var g=0;g<this.modules.length;g++){this.modules[g].start()}return this},resume:function(g){for(var j=0;j<this.modules.length;j++){this.modules[j].resume(g)}return this},pause:function(){for(var g=0;g<this.modules.length;g++){this.modules[g].resume(false)}return this},stop:function(){for(var g=0;g<this.modules.length;g++){this.modules[g].stop()}return this}});hotjs.HashMap=e;hotjs.App=b})();hotjs=hotjs||{};(function(){var c={Float:function(g,f){return((Math.random()*(f-g))+g)},Integer:function(g,f){return Math.floor((Math.random()*(f-g))+g)},Color:function(g,f){var j=c.Integer(g,f);var i=c.Integer(g,f);var k=c.Integer(g,f);return("#"+j.toString(16)+i.toString(16)+k.toString(16))}};var a={copy:function(f){return[f[0],f[1]]},vert:function(f){return[f[1],-f[0]]},add:function(g,f){return[g[0]+f[0],g[1]+f[1]]},sub:function(g,f){return[g[0]-f[0],g[1]-f[1]]},mul:function(f,g){return[f[0]*g,f[1]*g]},scale:function(f,g){return[f[0]*g[0],f[1]*g[1]]},scaleDown:function(f,g){return[f[0]/g[0],f[1]/g[1]]},getLength:function(f){return Math.sqrt(f[0]*f[0]+f[1]*f[1])},norm:function(f){var g=1/Math.sqrt(f[0]*f[0]+f[1]*f[1]);return[f[0]*g,f[1]*g]},angle:function(g){var f=Math.acos(g[0]/Math.sqrt(g[0]*g[0]+g[1]*g[1]));if(g[1]<0){f=-f}return f},project:function(t,r){var j=t[0],i=t[1];var f=r[0],x=r[1];var l=Math.atan2(i,j);var k=Math.atan2(x,f);var g=l-k;var w=Math.sqrt(j*j+i*i)*Math.cos(g);var q=w*Math.cos(k);var m=w*Math.sin(k);return[q,m]},inRect:function(f,g){return((f[0]>=g[0])&&(f[0]<g[0]+g[2]))&&((f[1]>=g[1])&&(f[1]<g[1]+g[3]))},inCircle:function(i,g,f){return((i[0]-g[0])*(i[0]-g[0])+(i[1]-g[1])*(i[1]-g[1])<=(f*f))}};var b={create:function(f,w,g){if(g==undefined){g=0}var q=[];for(var l=0;l<f;l++){var t=[];for(var k=0;k<w;k++){t.push(g)}q.push(t)}return q},copy:function(v){var k=[];for(var l=0,f=v.length;l<f;l++){var q=v[l],t=[];for(var g=0,w=q.length;g<w;g++){t[g]=q[g]}k.push(t)}return k},copyDeep:function e(k){if(Array.isArray(k)){var g=[];for(var j=0,f=k.length;j<f;j++){g.push(b.copyDeep(k[j]))}return g}else{return k}},isEqual:function(l,g){if(l.length<1||g.length<1){return false}if(l.length!=g.length){return false}if(l[0].length!=g[0].length){return false}for(var t=0,f=l.length;t<f;t++){var q=l[t],k=g[t];for(var r=0,v=q.length;r<v;r++){if(q[r]!=k[r]){return false}}}return true},add:function(k,g){var x=[];for(var w=0,q=k.length;w<q;w++){var f=[],z=k[w],y=g[w];for(var v=0,l=z.length;v<l;v++){f[v]=z[v]+y[v]}x.push(f)}return x},sub:function(k,g){var x=[];for(var w=0,q=k.length;w<q;w++){var f=[],z=k[w],y=g[w];for(var v=0,l=z.length;v<l;v++){f[v]=z[v]-y[v]}x.push(f)}return x},mul:function(){},setValue:function(f,w){var t=[];for(var q=0,k=f.length;q<k;q++){var x=f[q],r=[];for(var l=0,g=x.length;l<g;l++){r.push(w)}t.push(r)}return t},convert:function(f,k){var v=[];for(var r=0,l=f.length;r<l;r++){var w=f[r],t=[];for(var q=0,g=w.length;q<g;q++){t.push(k(w[q]))}v.push(t)}return v},inverse:function(r){var f=r.length;var t=r[0].length;var k=b.create(t,f);for(var l=0;l<f;l++){var q=r[l];for(var g=0;g<t;g++){k[g][l]=q[g]}}return k},toString:function(k,q,j){if(q==undefined){q=""}if(j==undefined){j="|"}var l=[];for(var g=0,f=k.length;g<f;g++){l.push(k[g].join(q))}return l.join(j)},fromString:function(k,m,j){if(m==undefined){m=""}if(j==undefined){j="|"}var g=[];var l=k.split(j);for(var f=0;f<l.length;f++){g.push(l[f].split(m))}return g},log:function(j){for(var g=0,f=j.length;g<f;g++){console.log(j[g])}}};hotjs.Random=c;hotjs.Vector=a;hotjs.Matrix=b})();(function(){var I={};var x=null;var H=0;var C=0;var t=false;function E(J){if(J.endsWith("ogg")){return(J.indexOf("video")>-1)}else{return(J.endsWith("mp4")||J.endsWith("webm"))}}function e(J){if(J.endsWith("ogg")){return(J.indexOf("video")==-1)}else{return(J.endsWith("mp3")||J.endsWith("wav"))}}function B(){var K=true;for(var J in I){if(I.hasOwnProperty(J)&&!I[J]){K=false}}return K}function F(K,N,L){var J=Math.round(100*N/L);var M=document.getElementById("loading_msg");if(M){M.innerHTML=J+"% ("+N+"/"+L+")"}}function y(J){var K=document.getElementById("loading_msg");if(K){K.innerHTML="error loading: "+J.substring(J.lastIndexOf("/")+1)}}function q(){d=document.getElementById("hotjs_res_loading_win");if(d){d.parentNode.removeChild(d)}}var j=[q];var k=[F];var w=[y];function c(J){j=[q,J]}function f(J){k=[F,J]}function l(J){w=[y,J]}function b(){var K=window.innerWidth,M=window.innerHeight;var L=100,N=300;var J=(K-L)/2,P=(M-N)/2;var O=document.getElementById("hotjs_res_loading_win");if(O==undefined){O=document.createElement("div");O.setAttribute("id","hotjs_res_loading_win");O.setAttribute("style","left:"+J+"px;top:"+P+"px;width:"+L+"px;text-align:center;alpha:0.5;background:silver;border:solid silver 1px;padding:10px;display:solid;position:absolute;-moz-border-radius:10px;-webkit-border-radius: 10px;-khtml-border-radius: 10px;border-radius: 10px;");document.body.appendChild(O)}O.style["font-family"]="Verdana,Geneva,sans-serif";O.style["font-size"]="9pt";O.innerHTML="<img id='loading_img' src='data:image/gif;base64,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'/>";O.innerHTML+="<br><br><div id='loading_msg'>0%</div>";O.style.display="block"}function r(J,K){readyCallbaks=[q];k=[F];w=[y];if(K!=undefined){if(typeof K.ready=="function"){j=[q,K.ready]}if(typeof K.loading=="function"){k=[F,K.loading]}if(typeof K.error=="function"){w=[y,K.error]}}if(J instanceof Array){J.forEach(function(L){G(L)})}else{G(J)}if(!B()){b()}}function a(K){K=hotjs.getAbsPath(K,document.location.href);if(I.hasOwnProperty(K)){delete I[K]}if(K.endsWith(".js")){var J=document.getElementsByTagName("script");for(var L=0;L<J.length;L++){if(K==hotjs.getAbsPath(J[L].src,document.location.href)){J[L].parentNode.removeChild(J[L])}}}else{if(K.endsWith(".css")){var J=document.getElementsByTagName("link");for(var L=0;L<J.length;L++){if(K==hotjs.getAbsPath(J[L].href,document.location.href)){J[L].parentNode.removeChild(J[L])}}}else{}}}function A(J){if(J instanceof Array){J.forEach(function(K){a(K)})}else{a(J)}}function G(K){K=hotjs.getAbsPath(K,document.location.href);if(K in I){return}else{var O;var Q=E(K),L=e(K),T=K.endsWith(".js"),R=K.endsWith(".css");if(Q){O=new Video()}else{if(L){O=new Audio()}else{if(T){var S=document.getElementsByTagName("script");for(var N=0;N<S.length;N++){if(S[N].src==K){return S[N]}}O=document.createElement("script")}else{if(R){var S=document.getElementsByTagName("link");for(var N=0;N<S.length;N++){if(S[N].href==K){return S[N]}}O=document.createElement("link");O.setAttribute("rel","stylesheet")}else{O=new Image()}}}}I[K]=false;H++;var M=function(){I[K]=O;if(x!=null){if(typeof x.addRes=="function"){x.addRes(K)}}C++;if(t){console.log(K+" preloaded ("+C+"/"+H+")")}if(K.endsWith(".sprite.js")){var Z=hotjs.getFileName(K);if(Z in sprite_cache){var Y=sprite_cache[Z];Y.url=K;var U=Y.images;for(id in U){var aa=U[id];var W=hotjs.getAbsPath(aa[0],K);aa[2]=W;G(W)}}}else{if(K.endsWith(".pst.js")){var Z=hotjs.getFileName(K);if(Z in pst_cache){var V=pst_cache[Z]["launchers"];for(var X=0;X<V.length;X++){resurl=hotjs.getAbsPath(V[X].res,K);V[X].resurl=resurl;G(resurl)}}}}k.slice(0).forEach(function(ab){ab(K,C,H)});if(B()){if(t){console.log("resources ready.")}j.slice(0).forEach(function(ab){ab()})}};var P=function(){if(t){console.log(K+" preloaded ("+C+"/"+H+")")}w.slice(0).forEach(function(U){U(K)})};O.addEventListener("error",P);if(Q||L){O.addEventListener("canplay",M);O.setAttribute("preload","auto");var J=document.getElementById("hotjs_media_lib");if(!J){J=document.createElement("div");J.setAttribute("id","hotjs_media_lib");J.style.display="none";document.body.appendChild(J)}J.appendChild(O);O.setAttribute("src",K)}else{if(T){O.async=true;O.addEventListener("load",M);var S=document.getElementsByTagName("script");S[0].parentNode.insertBefore(O,S[0]);O.setAttribute("src",K)}else{if(R){O.async=true;O.addEventListener("load",M);var S=document.getElementsByTagName("script");S[0].parentNode.insertBefore(O,S[0]);O.setAttribute("href",K)}else{O.addEventListener("load",M);O.setAttribute("src",K)}}}return O}}function D(M){M=hotjs.getAbsPath(M,document.location.href);var O=I[M];if(!O){var L=E(M),K=e(M),J=M.endsWith(".js"),P=M.endsWith(".css");if(L){O=new Video();O.setAttribute("src",M);O.load()}else{if(K){O=new Audio();O.setAttribute("src",M);O.load()}else{if(J){O=document.createElement("script");O.async=1;O.setAttribute("src",M);var N=document.getElementsByTagName("script");N[0].parentNode.insertBefore(O,N[0])}else{O=new Image();O.setAttribute("src",M)}}}I[M]=O}return O}var g=false;function v(J){g=J}function z(J){if(!g){D(J).play()}}function m(J){if(x!==null){console.log("warning: previous app not exit normally.")}x=J;return this}function i(J){if(x){if(typeof x.exit=="function"){x.exit()}if(typeof x.getRes=="function"){A(x.getRes())}x=null}if(t){console.log("loading app from js: "+J)}r(J,{ready:function(){if(x){if(typeof x.init=="function"){x.init()}}}});return this}window.resources={get:D,load:r,unload:A,isReady:B,onReady:c,onLoading:f,onError:l,playAudio:z,muteAudio:v,regApp:m,runAppFromJs:i,setDebug:function(J){t=J},getAll:function(){return I},getActiveApp:function(){return x}}})();var hotjs=hotjs||{};(function(){var a=hotjs.Vector;var f=(function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(i){window.setTimeout(i,1000/60)}})();var g=function(){hotjs.base(this);this.canvas=document.createElement("canvas");this.ctx=this.canvas.getContext("2d");this.canvas.width=480;this.canvas.height=320;this.rect=this.canvas.getBoundingClientRect();this.color="black";this.bgcolor="white";this.bgrepeat=false;this.bgimg=undefined;this.bgimgrect=undefined;this.container=undefined;this.scenes=[];this.sceneIndex={};this.curScene=undefined;this.bFps=false;this.dtSum=0;this.frames=0;this.fps=60;this.maxFps=60;this.runningTime=0;this.runningTimeStr="0 : 00 : 00";this.infoPos=[40,40];this.dragItems=new hotjs.HashMap();this.touches=new hotjs.HashMap();this.mouseInView=[0,0,0];this.mouseInNode=[0,0,0];this.touch_accuracy=3;var j=this;var i=this.canvas;this.canvas.addEventListener("click",function(k){j.onClick(k);k.preventDefault()});this.canvas.addEventListener("mousedown",function(k){document.onmousemove=function(l){l=l||window.event;j.onMouseMove(l);k.preventDefault()};document.onmouseup=function(l){document.onmousemove=null;if(i.releaseCapture){i.releaseCapture()}j.onMouseUp(l);k.preventDefault()};if(i.setCapture){i.setCapture()}j.onMouseDown(k);k.preventDefault()});this.canvas.addEventListener("mousemove",function(k){j.onMouseMove(k);k.preventDefault()});this.canvas.addEventListener("touchstart",function(k){j.onTouchStart(k);k.preventDefault()});this.canvas.addEventListener("touchend",function(k){j.onTouchEnd(k);k.preventDefault()});this.canvas.addEventListener("touchcancel",function(k){j.onTouchEnd(k);k.preventDefault()});this.canvas.addEventListener("touchmove",function(k){j.onTouchMove(k);k.preventDefault()})};hotjs.inherit(g,hotjs.Class,{start:function(){var l=this;var m=Date.now();var k=1000/this.maxFps;var i=m+k;function j(){var q=Date.now();if(q>i){if(l.running){var r=(q-m)/1000;l.update(r);l.render()}m=q;i+=k}if(!l.stopping){f(j)}else{l.stopped=true}}this.stopping=false;this.running=true;j();return this},stop:function(){this.stopping=true;return this},setMaxFps:function(i){this.maxFps=Math.max(1,Math.min(i,60));return this},resume:function(i){if(i==undefined){i=true}this.running=i;return this},pause:function(){this.rusume(false);return this},setContainer:function(i){this.container=document.getElementById(i);if(!this.container){this.container=document.body}this.container.appendChild(this.canvas);this.canvas.unselectable="on";this.canvas.onselectstart=function(){return false};this.canvas.style.userSelect=this.canvas.style.MozUserSelect="none";return this},setSize:function(i,j){this.canvas.width=i;this.canvas.height=j;this.rect=this.canvas.getBoundingClientRect();return this},setBgColor:function(i){this.bgcolor=i;return this},setColor:function(i){this.color=i;return this},setBgImage:function(k,i,j){this.bgrepeat=k;this.bgimg=i;if(!j){this.bgimgrect=[0,0,i.width,i.height]}else{this.bgimgrect=[j[0],j[1],j[2],j[3]]}return this},getSize:function(){return[this.canvas.width,this.canvas.height]},width:function(){return this.canvas.width},height:function(){return this.canvas.height},shift:function(i,j){if(!!this.curScene){this.curScene.move(-i,-j)}return this},zoom:function(j,i){if(!i){i=[this.width()/2,this.height()/2]}if(!!this.curScene){var k=this.curScene.posFromContainer(i);this.curScene.zoom(j,k)}return this},addNode:function(i,j){this.scenes.push(i);if(j!=undefined){this.sceneIndex[j]=i}i.setContainer(this);this.curScene=i;return this},switchScene:function(i){if(!!i){if(!!this.curScene){}this.curScene=i}return this},switchSceneById:function(j){var i=this.sceneIndex[j];if(!!i){this.switchScene(i)}return this},pushSceneById:function(i){this.sceneStack.push(this.curScene);this.switchSceneById(i);return this},popScene:function(){var i=this.sceneStack.pop();this.switchScene(i);return this},showFPS:function(i){if(i==undefined){i=(!this.bFps)}this.bFps=i;return this},update:function(q){for(var k=0;k<this.scenes.length;k++){this.scenes[k].update(q)}this.frames++;this.dtSum+=q;if(this.dtSum>1){this.rect=this.canvas.getBoundingClientRect();this.runningTime+=this.dtSum;if(this.bFps){var l=Math.floor(this.runningTime);var j=Math.floor(l/60);l%=60;if(l<10){l="0"+l}h=Math.floor(j/60);j%=60;if(j<10){j="0"+j}this.runningTimeStr=h+" : "+j+" : "+l}this.fps=Math.round(this.frames/this.dtSum);this.dtSum=0;this.frames=0}return this},render:function(){var k=this.ctx;k.save();if(!!this.bgimg){if(this.bgrepeat){k.fillStyle=k.createPattern(this.bgimg,"repeat");k.fillRect(0,0,this.canvas.width,this.canvas.height)}else{k.drawImage(this.bgimg,this.bgimgrect[0],this.bgimgrect[1],this.bgimgrect[2],this.bgimgrect[3],0,0,this.canvas.width,this.canvas.height)}}else{if(!!this.bgcolor){k.fillStyle=this.bgcolor;k.fillRect(0,0,this.canvas.width,this.canvas.height)}}for(var j=0;j<this.scenes.length;j++){this.scenes[j].render(k)}this.draw(k);k.restore();return this},setInfoPos:function(i,j){this.infoPos=[i,j];return this},draw:function(k){if(this.bFps){k.save();k.strokeStyle=this.color;k.fillStyle=this.color;k.fillText(this.runningTimeStr,this.infoPos[0],this.infoPos[1]+20);k.fillText(this.fps+" fps: "+this.frames,this.infoPos[0],this.infoPos[1]+40);k.fillText("("+this.canvas.width+" x "+this.canvas.height+")",this.infoPos[0],this.infoPos[1]+60);var j="("+this.rect.width+" x "+this.rect.height+"): ("+this.rect.left+","+this.rect.top+") -> ("+this.rect.right+","+this.rect.bottom+")";k.fillText(j,this.infoPos[0],this.infoPos[1]+80);if(this.curScene&&this.curScene.scale){var i=this.curScene.scale;i=Math.round(i[0]*100)+"% x "+Math.round(i[1]*100)+"%";k.fillText(i,this.infoPos[0],this.infoPos[1]+100)}k.fillText(this.mouseInView[2]+": ("+this.mouseInView[0]+", "+this.mouseInView[1]+")",this.infoPos[0],this.infoPos[1]+120);k.fillText(this.mouseInNode[2]+": ("+this.mouseInNode[0]+", "+this.mouseInNode[1]+")",this.infoPos[0],this.infoPos[1]+140);k.strokeRect(0,0,this.canvas.width,this.canvas.height);k.restore()}},touchFromEvent:function(m){var j=this.canvas;var t=j.ownerDocument||j.document||document;var i=t.documentElement;var k=t.body;var q=i.scrollLeft||k.scrollLeft;var l=i.scrollTop||k.scrollTop;var r=m.identifier;if(m.identifier==undefined){r=0}return{id:r,x:Math.round(m.pageX-this.rect.left-q),y:Math.round(m.pageY-this.rect.top-l)}},click:function(i){var j=this.curScene;if(!!j){if(j.inRange([i.x,i.y])){return j.onClick(i)}}return false},onClick:function(i){return false},onMouseDown:function(k){var i=this.touchFromEvent(k);this.touches.put(i.id,[i.x,i.y]);this.mouseInView=[i.x,i.y,i.id];this.t0=[i.x,i.y];var j=this.curScene;if(!!j){if(j.inRange([i.x,i.y])){if(j.draggable){this.dragItems.put(i.id,j)}return j.onTouchStart(i)}}return false},onMouseUp:function(l){var i=this.touchFromEvent(l);this.touches.remove(i.id);this.mouseInView=[i.x,i.y,i.id];var k=[i.x-this.t0[0],i.y-this.t0[1]];if(hotjs.Vector.getLength(k)<=this.touch_accuracy){this.click(i)}var j=this.dragItems.get(i.id);if(!!j){this.dragItems.remove(i.id);return j.onTouchEnd(i)}var j=this.curScene;if(!!j){if(j.inRange([i.x,i.y])){return j.onTouchEnd(i)}}return false},onMouseMove:function(k){var i=this.touchFromEvent(k);this.mouseInView=[i.x,i.y,i.id];var j=this.dragItems.get(i.id);if(!!j){return j.onTouchMove(i)}var j=this.curScene;if(!!j){return j.onTouchMove(i)}return false},onTouchStart:function(k){this.touch_accuracy=10;for(var j=0;j<k.targetTouches.length;j++){this.onMouseDown(k.targetTouches[j])}},onTouchEnd:function(k){this.touch_accuracy=10;for(var j=0;j<k.changedTouches.length;j++){this.onMouseUp(k.changedTouches[j])}},onTouchMove:function(k){this.touch_accuracy=10;for(var j=0;j<k.targetTouches.length;j++){this.onMouseMove(k.targetTouches[j])}}});var e=0;var c=function(){hotjs.base(this);this.container=undefined;this.name="node_"+(e++);this.subnodes=undefined;this.index={};this.size=[40,40];this.color=undefined;this.bgcolor=undefined;this.img=undefined;this.imgrect=undefined;this.sprite=undefined;this.gridOn=false;this.imgOn=true;this.pos=[0,0];this.velocity=[0,0];this.rotation=undefined;this.scale=undefined;this.alpha=undefined;this.anims=[];this.accel=undefined;this.mass=1600;this.density=1;this.draggable=undefined;this.moveable=undefined;this.zoomable=undefined;this.rotateable=undefined;this.throwable=undefined;this.gesture=[0,0];this.dragging=false};hotjs.inherit(c,hotjs.Class,{setName:function(i){this.name=i;return this},getName:function(){return this.name},setPos:function(i,j){this.pos=[i,j];return this},setSize:function(i,j){this.size=[i,j];return this},getSize:function(){return this.size},posFromContainer:function(j){var i=j[0]-this.pos[0],k=j[1]-this.pos[1];if(!!this.scale){i/=this.scale[0];k/=this.scale[1]}return[Math.floor(i),Math.floor(k)]},posToContainer:function(j){var i=j[0],k=j[1];if(!!this.scale){i*=this.scale[0];k*=this.scale[1]}return[Math.floor(i+this.pos[0]),Math.floor(k+this.pos[1])]},inRange:function(k){var j=this.posFromContainer(k);var i=(j[0]>=0)&&(j[0]<this.size[0])&&(j[1]>=0)&&(j[1]<this.size[1]);return i},setDraggable:function(i,j){this.draggable=i||j;this.draggableX=i;this.draggableY=(j==undefined)?i:j;if(this.draggable){if(this.touches0==undefined){this.touches0=new hotjs.HashMap()}if(this.touches==undefined){this.touches=new hotjs.HashMap()}}return this},setMoveable:function(i,j){this.setDraggable(i,j);this.moveable=i||j;return this},setThrowable:function(i,j){this.setMoveable(i,j);this.throwable=i||j;this.throwableX=i;this.throwableY=(j==undefined)?i:j;return this},setZoomable:function(i){this.zoomable=i;if(i){if(this.touches0==undefined){this.touches0=new hotjs.HashMap()}if(this.touches==undefined){this.touches=new hotjs.HashMap()}if(this.scale==undefined){this.scale=[1,1]}}return this},setRotateable:function(i){if(i){if(this.touches0==undefined){this.touches0=new hotjs.HashMap()}if(this.touches==undefined){this.touches=new hotjs.HashMap()}if(this.rotation==undefined){this.rotation=0}}this.rotateable=i;return this},onClick:function(k){var q=this.posFromContainer([k.x,k.y]);var l={id:k.id,x:q[0],y:q[1]};this.container.mouseInNode=[l.x,l.y,l.id];if(!!this.subnodes){for(var j=this.subnodes.length-1;j>=0;j--){var m=this.subnodes[j];if(m.inRange(q)){return m.onClick(l)}}}},onTouchStart:function(k){if(!!this.touches0){var m={id:k.id,x:k.x,y:k.y,px:this.pos[0],py:this.pos[1]};if(this.zoomable){m.sx=this.scale[0];m.sy=this.scale[1]}if(this.rotateable){m.r=this.rotation}this.touches0.put(k.id,m);if(this.touches0.size()==1){this.id0=k.id}}this.gestureTime=Date.now();this.gesturePos=[k.x,k.y];this.gesture=[0,0];var r=this.posFromContainer([k.x,k.y]);var l={id:k.id,x:r[0],y:r[1]};this.container.mouseInNode=[l.x,l.y,l.id];if(!!this.subnodes){for(var j=this.subnodes.length-1;j>=0;j--){var q=this.subnodes[j];if((!!q.draggable)&&q.inRange(r)){this.dragItems.put(l.id,q);return q.onTouchStart(l)}}}if(!!this.draggable){this.dragging=true;this.setVelocity(0,0);return true}return false},fixPos:function(){},handleDragZoomRotate:function(B){if(!this.touches){return false}if(!this.touches0){return false}if(this.draggable){if(this.touches.size()==1){var v=this.touches0.get(this.id0);var m=this.touches.get(this.id0);if(this.draggableX){this.pos[0]=(m.x-v.x+v.px)}if(this.draggableY){this.pos[1]=(m.y-v.y+v.py)}this.fixPos()}}if(this.zoomable){if(this.touches.size()==2){var i=this.touches.keys();var x=this.touches0.get(i[0]);var z=this.touches0.get(i[1]);var k=a.getLength(a.sub([x.x,x.y],[z.x,z.y]));var r=this.touches.get(i[0]);var y=this.touches.get(i[1]);var j=a.getLength(a.sub([r.x,r.y],[y.x,y.y]));var v=this.touches0.get(this.id0);this.scale=[v.sx*j/k,v.sy*j/k];var w=[(x.x+z.x)/2,(x.y+z.y)/2];center_view=a.add([v.px,v.py],a.scale(w,[v.sx,v.sy]));this.pos=a.sub(center_view,a.scale(w,this.scale));var q=[(r.x+y.x)/2,(r.y+y.y)/2];var l=a.sub(q,w);this.pos=a.add(this.pos,l);this.fixPos()}}if(this.rotateable){}if(!!this.throwable){var A=this.getGesture();if(this.throwableX){this.velocity[0]=A[0]}if(this.throwableY){this.velocity[1]=A[1]}}},updateGesture:function(j){var i=Date.now();var k=(i-this.gestureTime)/1000;if(k>0){this.gesture=[(j.x-this.gesturePos[0])/k,(j.y-this.gesturePos[1])/k];if(k>0.3){this.gestureTime=i;this.gesturePos=[j.x,j.y]}}},getGesture:function(){return this.gesture},onTouchMove:function(k){if(!!this.touches){var m={id:k.id,x:k.x,y:k.y,px:this.pos[0],py:this.pos[1]};if(this.zoomable){m.sx=this.scale[0];m.sy=this.scale[1]}if(this.rotateable){m.r=this.rotation}this.touches.put(k.id,m)}this.updateGesture(k);if(!!this.dragging){this.handleDragZoomRotate(k);return true}var r=this.posFromContainer([k.x,k.y]);var l={id:k.id,x:r[0],y:r[1]};this.container.mouseInNode=[l.x,l.y,l.id];if(!!this.dragItems){var q=this.dragItems.get(k.id);if(!!q){return q.onTouchMove(l)}}if(!!this.subnodes){for(var j=this.subnodes.length-1;j>=0;j--){var q=this.subnodes[j];if(q.inRange(r)){return q.onTouchMove(l)}}}return false},onTouchEnd:function(i){if(!!this.touches){var l={id:i.id,x:i.x,y:i.y,px:this.pos[0],py:this.pos[1]};if(this.zoomable){l.sx=this.scale[0];l.sy=this.scale[1]}if(this.rotateable){l.r=this.rotation}this.touches.put(i.id,l)}this.updateGesture(i);if(this.dragging){this.dragging=false;if(!!this.moveable){this.handleDragZoomRotate(i)}else{var k=this.touches0.get(this.id0);this.pos=[k.px,k.py]}if(!!this.touches){this.touches.remove(i.id)}if(!!this.touches0){this.touches0.remove(i.id)}return true}var q=this.posFromContainer([i.x,i.y]);var j={id:i.id,x:q[0],y:q[1]};this.container.mouseInNode=[j.x,j.y,j.id];if(!!this.dragItems){var m=this.dragItems.get(i.id);if(!!m){this.dragItems.remove(j.id);return m.onTouchEnd(j)}}if(!!this.touches){this.touches.remove(i.id)}if(!!this.touches0){this.touches0.remove(i.id)}return false},width:function(){return this.size[0]},height:function(){return this.size[1]},setRotation:function(i){this.rotation=i;return this},setScale:function(j,i){this.scale=[j,i];return this},setVelocity:function(j,i){this.velocity=[j,i];return this},setMass:function(i){this.mass=i;return this},setDensity:function(i){this.density=i;this.mass=this.size[0]*this.size[1]*i;return this},setAccel:function(j,i){if(!this.velocity){this.velocity=[0,0]}this.accel=[j,i];return this},setColor:function(i){this.color=i;return this},setBgColor:function(i){this.bgcolor=i;return this},setAlpha:function(i){this.alpha=i;return this},showGrid:function(i){if(i==undefined){i=(!this.gridOn)}this.gridOn=i;return this},showImg:function(i){if(i==undefined){i=(!this.imgOn)}this.imgOn=i;return this},setImage:function(i,j){this.img=i;if(!j){this.imgrect=[0,0,i.width,i.height];if(!this.size){this.size=[i.width,i.height]}}else{this.imgrect=[j[0],j[1],j[2],j[3]];if(!this.size){this.size=[rect[2],rect[3]]}}return this},setSprite:function(i){this.sprite=i;return this},addNode:function(j,i){if(this.subnodes==undefined){this.subnodes=[]}if(this.index==undefined){this.index={}}if(this.dragItems==undefined){this.dragItems=new hotjs.HashMap()}if(this.touches==undefined){this.touches=new hotjs.HashMap()}j.setContainer(this);this.subnodes.push(j);if(typeof i=="string"){this.index[i]=j}return this},removeNode:function(k){if(!!this.subnodes){var j=this.subnodes.indexOf(k);if(j>=0){this.subnodes.splice(j,1);k.setContainer(undefined)}}return this},removeAll:function(){if(!!this.subnodes){while(this.subnodes.length>0){n=this.subnodes.pop();if("removeAll" in n){n.removeAll()}}for(id in this.index){delete this.index[id]}}return this},update:function(k){if(!!this.sprite){this.sprite.update(k)}if(!!this.subnodes){for(var j=0;j<this.subnodes.length;j++){this.subnodes[j].update(k)}}if(!!this.dragging){return this}if(this.velocity!==undefined){this.pos[0]+=this.velocity[0]*k;this.pos[1]+=this.velocity[1]*k}if(this.accel!==undefined){this.velocity[0]+=this.accel[0]*k;this.velocity[1]+=this.accel[1]*k}if(this.anims.length>0){for(var j=0;j<this.anims.length;j++){this.anims[j].update(k)}}return this},addAnim:function(i){this.anims.push(i);return this},removeAnim:function(i){this.anims.splice(this.anims.indexOf(i),1);return this},render:function(k){k.save();if(!this.rotation){k.translate(this.pos[0],this.pos[1])}else{k.translate(this.pos[0]+this.size[0]/2,this.pos[1]+this.size[1]/2);k.rotate(this.rotation*Math.PI/180);k.translate(-this.size[0]/2,-this.size[1]/2)}if(!!this.scale){k.scale(this.scale[0],this.scale[1])}if(!!this.alpha){k.globalAlpha=this.alpha}this.draw(k);if(!!this.subnodes){for(var j=0;j<this.subnodes.length;j++){this.subnodes[j].render(k)}}k.restore();return this},draw:function(i){i.save();if(this.imgOn){if(!!this.sprite){this.sprite.render(i,this.size[0],this.size[1])}else{if(!!this.img){if(!!this.imgrect){i.drawImage(this.img,this.imgrect[0],this.imgrect[1],this.imgrect[2],this.imgrect[3],0,0,this.size[0],this.size[1])}else{i.drawImage(this.img,0,0,this.size[0],this.size[1])}}}}if(this.gridOn){i.strokeRect(0,0,this.size[0],this.size[1])}i.restore();return this}});var b=function(){hotjs.base(this);this.bgrepeat=false;this.bgimg=undefined;this.bgimgrect=undefined;this.area=undefined;this.arearepeat=false;this.areaimg=undefined;this.areaimgrect=undefined;this.scale=[1,1]};hotjs.inherit(b,c,{setView:function(i){this.setContainer(i);this.zoom();this.setDraggable(true);this.setMoveable(true);return this},setBgImage:function(k,i,j){this.bgrepeat=k;this.bgimg=i;if(!j){this.bgimgrect=[0,0,i.width,i.height]}else{this.bgimgrect=[j[0],j[1],j[2],j[3]]}return this},setAreaImage:function(k,i,j){this.arearepeat=k;this.areaimg=i;if(!j){this.areaimgrect=[0,0,i.width,i.height]}else{this.areaimgrect=[j[0],j[1],j[2],j[3]]}return this},setArea:function(i,l,j,k){this.area={l:i,t:l,w:j,h:k,r:(i+j),b:(l+k)};return this},getArea:function(){if(!this.area){return{l:0,t:0,w:this.size[0],h:this.size[1],r:this.size[0],b:this.size[1]}}return this.area},onTouchMove:function(j){var i=b.supClass.onTouchMove.call(this,j);return i},onTouchEnd:function(j){var i=b.supClass.onTouchEnd.call(this,j);this.fixPos();return i},fixPos:function(){var i=hotjs.Vector;var k=this.container.width(),m=this.container.height();var t=k/this.size[0],r=m/this.size[1];var l=Math.min(t,r);if(this.scale[0]<l||this.scale[1]<l){this.scale[0]=l;this.scale[1]=l}if(this.pos[0]>0){this.pos[0]=0}if(this.pos[1]>0){this.pos[1]=0}var q=(!this.scale)?i.add(this.size,this.pos):i.add(i.scale(this.size,this.scale),this.pos);var j=i.sub(this.container.getSize(),q);if(j[0]>0){this.pos[0]+=j[0]}if(j[1]>0){this.pos[1]+=j[1]}return this},move:function(i,j){this.pos[0]+=i;this.pos[1]+=j;this.fixPos();return this},zoom:function(q,m){var k=this.container.getSize();var i=[k[0]/this.size[0],k[1]/this.size[1]];var l=Math.max(i[0],i[1]);if(q=="none"){this.scale=[1,1];this.pos=[(k[0]-this.size[0])/2,(k[1]-this.size[1])/2]}else{if(q=="stretch"){this.scale=i;this.pos=[0,0]}else{if(q>0){if(!this.scale){this.scale=[1,1]}var j=[l/this.scale[0],l/this.scale[1]];q=Math.max(j[0],Math.max(j[1],q));this.pos=[this.pos[0]-m[0]*this.scale[0]*(q-1),this.pos[1]-m[1]*this.scale[1]*(q-1)];this.scale=a.mul(this.scale,q);if(this.scale[0]<l||this.scale[1]<l){this.scale=[l,l]}}else{this.scale=[l,l];this.pos=[(k[0]-this.size[0]*l)/2,(k[1]-this.size[1]*l)/2]}}}this.fixPos();return this},play:function(){this.playing=true;return this},stop:function(){this.playing=false;return this},draw:function(q){q.save();var k=this.getArea();if(this.imgOn){if(!!this.bgimg){if(this.bgrepeat){q.fillStyle=q.createPattern(this.bgimg,"repeat");q.fillRect(0,0,this.size[0],this.size[1])}else{q.drawImage(this.bgimg,this.bgimgrect[0],this.bgimgrect[1],this.bgimgrect[2],this.bgimgrect[3],0,0,this.size[0],this.size[1])}}else{if(!!this.bgcolor){q.fillStyle=this.bgcolor;q.fillRect(0,0,this.size[0],this.size[1])}}if(!!this.areaimg){if(this.arearepeat){q.fillStyle=q.createPattern(this.areaimg,"repeat");q.fillRect(k.l,k.t,k.w,k.h)}else{q.drawImage(this.areaimg,this.areaimgrect[0],this.areaimgrect[1],this.areaimgrect[2],this.areaimgrect[3],k.l,k.t,k.w,k.h)}}}if(this.gridOn){q.strokeStyle=this.color;q.lineWidth=0.5;var l=40,j=40;q.beginPath();for(var i=0;i<=this.size[0];i+=l){q.moveTo(i,0);q.lineTo(i,this.size[1])}for(var m=0;m<=this.size[1];m+=j){q.moveTo(0,m);q.lineTo(this.size[0],m)}q.stroke();q.lineWidth=1;q.beginPath();q.arc((k.l+k.r)/2,(k.t+k.b)/2,10,0,Math.PI*2);q.arc(this.size[0]/2,this.size[1]/2,20,0,Math.PI*2);q.stroke();q.beginPath();q.strokeRect(k.l,k.t,k.w,k.h);q.strokeRect(0,0,this.size[0],this.size[1]);q.stroke()}q.restore();return this},addItem:function(){}});hotjs.View=g;hotjs.Node=c;hotjs.Scene=b})();var hotjs=hotjs||{};(function(){function c(i,q,j,l,m,g,k){this.pos=q;this.size=j;this.speed=typeof l==="number"?l:0;this.frames=m;this._index=0;this.url=i;this.dir=g||"horizontal";this.once=k}c.prototype={update:function(g){this._index+=this.speed*g},render:function(t,q,j){var g;if(this.speed>0){var l=this.frames.length;var r=Math.floor(this._index);g=this.frames[r%l];if(this.once&&r>=l){this.done=true;return}}else{g=0}var m=this.pos[0];var k=this.pos[1];if(this.dir=="vertical"){k+=g*this.size[1]}else{m+=g*this.size[0]}if(!q){q=this.size[0]}if(!j){j=this.size[1]}var i=resources.get(this.url);t.drawImage(i,m,k,this.size[0],this.size[1],0,0,q,j)}};var f=function(i,g){hotjs.base(this);this.sheet=sprite_cache[hotjs.getFileName(i)];this.anim=(this.sheet.anims)[g];this.index=0;this.counter=0};hotjs.inherit(f,hotjs.Class,{update:function(g){var i=this.anim[this.index];this.counter++;if(this.counter>=i[1]){this.counter=0;this.index++;if(this.index>=this.anim.length){this.index=0}}},render:function(M,v,H){M.save();M.translate(v*0.5,H);var N=this.sheet.modules;var z=this.sheet.images;var A=this.sheet.frames;var J=this.anim[this.index];var L=J[0],l=J[2],j=J[3],q=J[4];var k=A[L];M.translate(l,j);switch(q){case 0:M.scale(1,1);break;case 2:M.scale(-1,1);break;case 3:M.scale(1,-1);break;case 4:M.scale(-1,-1);break}for(var G=0;G<k.length;G++){var F=k[G];var O=F[0],D=F[1],C=F[2],K=F[3];var P=N[O];if(P[0]=="MD_IMAGE"){var B=P[1],t=P[2],r=P[3],v=P[4],H=P[5];var Q=z[B];var g=Q[2],E=Q[1];var I=resources.get(g);M.save();M.translate(D+v/2,C+H/2);switch(K){case 0:M.scale(1.01,1.01);break;case 2:M.scale(-1.01,1.01);break;case 3:M.scale(1.01,-1.01);break;case 4:M.scale(-1.01,-1.01);break}M.drawImage(I,t,r,v,H,-v/2,-H/2,v,H);M.restore()}}M.restore()}});var b=function(g){hotjs.base(this);this.par=g;this.frame=0;this.life=0;this.spin=0;this.spin_delta=0};hotjs.inherit(b,hotjs.Node,{init:function(){var g=hotjs.Random.Integer;var q=hotjs.Random.Float;var r=this.par;var w=r.mode.v;if(r.res.endsWith(".png")){this.setImage(resources.get(r.resurl))}else{if(r.res.endsWith(".sprite.js")){this.setSprite(new f(r.resurl,"xxx"))}else{return this}}this.life=g(r.lifeMin,r.lifeMax);this.pos=[r.x,r.y];switch(r.mode.id){case 0:break;case 31:this.pos[0]+=q(w[0],w[2]);this.pos[1]+=q(w[1],w[3]);break;case 32:var k=q(w[1],w[0]);var j=q(w[2],w[3]);this.pos[0]+=k*Math.cos(j*Math.PI/180);this.pos[1]+=k*Math.sin(j*Math.PI/180);break}var t=r.filters;for(var l=0;l<t.length;l++){var m=t[l];var w=m.v;switch(m.type){case"rotate":if(w[1]>0){this.rotation=q(0,1)*360}else{this.rotation=w[0]}this.spin=w[2];this.spin_delta=(w[3]-w[2])/this.life;break;case"scale":var x=q(w[0],w[1]);this.scale=[x,x];break;case"move":break;case"color":break;case"h3g":break}}return this},update:function(g){b.supClass.update.call(this,g);this.frame++;this.rotation+=this.spin;this.spin+=this.spin_delta}});var e=function(g){hotjs.base(this);this.par=g;this.par.maxPtsCount=Math.min(this.par.maxPtsCount,16);this.subnodes=[];this.frame=0};hotjs.inherit(e,hotjs.Node,{init:function(){},destroy:function(){this.subnodes.length=0},update:function(l){var g=hotjs.Random.Integer;var k=this.par;var q=this.subnodes;for(var j=q.length-1;j>=0;j--){var m=q[j];if(m.frame<m.life){m.update(l)}else{q.splice(j,1);delete m}}if(this.frame>=k.delay&&this.frame<k.life){var r=g(k.createMin,k.createMax);for(var j=0;j<r;j++){if(q.length>=k.maxPtsCount){break}var m=new b(k).init();this.addNode(m)}}this.frame++;if(this.frame>=25){this.frame=0}}});var a=function(g){hotjs.base(this);var l=pst_cache[hotjs.getFileName(g)];var k=l.launchers;for(var j=0;j<k.length;j++){this.addNode(new e(k[j]))}};hotjs.inherit(a,hotjs.Node,{});hotjs.Sprite=c;hotjs.Animat=f;hotjs.Particle=b;hotjs.ParticleSet=e;hotjs.ParticleSystem=a})();hotjs.Anim=hotjs.Anim||{};(function(){var f=function(r,t){hotjs.base(this);this.who=r;this.param={loop:false,duration:1};for(var q in t){this.param[q]=t[q]}this.dtSum=0};hotjs.inherit(f,hotjs.Class,{init:function(){},step:function(q){},restore:function(){},play:function(){this.init();this.who.addAnim(this);return this},update:function(t){this.dtSum+=t;var v=(this.dtSum>=this.param.duration)&&(!this.loop);var q=this.step(t);var r=this.param.step;if(typeof r=="function"){r(this.who,t)}if(v||q){this.who.removeAnim(this);var r=this.param.done;if(typeof r=="function"){r(this.who)}}}});var b=function(q,r){hotjs.base(this,q,r)};hotjs.inherit(b,f,{init:function(){var q=this.param;this.from=[this.who.pos[0],this.who.pos[1]];this.to=[q.to[0],q.to[1]]},step:function(q){this.who.pos=[this.from[0]+(this.to[0]-this.from[0])*this.dtSum/this.param.duration,this.from[1]+(this.to[1]-this.from[1])*this.dtSum/this.param.duration];if(this.dtSum>=this.param.duration){this.who.pos=this.to}return false},restore:function(q){this.who.pos=this.from}});var k=function(q,r){hotjs.base(this,q,r)};hotjs.inherit(k,f,{init:function(){var q=this.param;this.from=[this.who.pos[0],this.who.pos[1]];this.to=[q.to[0],q.to[1]]},step:function(r){var q=Math.pow(this.dtSum/this.param.duration,2);this.who.pos=[this.from[0]+(this.to[0]-this.from[0])*q,this.from[1]+(this.to[1]-this.from[1])*q];if(this.dtSum>=this.param.duration){this.who.pos=this.to}return false},restore:function(q){this.who.pos=this.from}});var g=function(q,r){hotjs.base(this,q,r)};hotjs.inherit(g,f,{init:function(){if(!this.who.velocity){this.who.rotation=[0,0]}this.from=this.who.velocity},step:function(r){var q=Math.cos((this.dtSum/this.param.duration)*(Math.PI/180));this.who.velocity=[this.from[0]*q,this.from[1]*q];if(this.dtSum>=this.param.duration){this.who.velocity=[0,0]}},restore:function(){this.who.velocity=this.from}});var c=function(q,r){hotjs.base(this,q,r)};hotjs.inherit(c,f,{init:function(){if(!this.who.rotation){this.who.rotation=0}this.from=this.who.rotation;this.inc=this.param.spin},step:function(q){this.who.rotation+=this.inc*q},restore:function(){this.who.rotation=this.from}});var i=function(q,r){hotjs.base(this,q,r)};hotjs.inherit(i,f,{init:function(){this.from=this.who.scale;this.to=param.to},step:function(q){this.who.scale=[this.from[0]+(this.to[0]-this.from[0])*this.dtSum/this.param.duration,this.from[1]+(this.to[1]-this.from[1])*this.dtSum/this.param.duration];if(this.dtSum>=this.param.duration){this.who.scale=this.to}},restore:function(){this.who.scale=this.from}});var a=function(q,r){hotjs.base(this,q,r)};hotjs.inherit(a,f,{init:function(){var q=this.param;this.from=this.who.scale;this.mid=(q.range[1]+q.range[0])/2;this.delta=(q.range[1]-q.range[0])/2},step:function(r){var q=this.mid+this.delta*Math.sin(this.dtSum/this.param.freq*Math.PI);this.who.scale=[q,q];return false},restore:function(){this.who.scale=this.from}});var j=function(q,r){hotjs.base(this,q,r)};hotjs.inherit(j,f,{init:function(){this.from=this.who.alpha;this.to=this.param.to},step:function(q){this.who.alpha=this.from+(this.to-this.from)*this.dtSum/this.param.duration;if(this.dtSum>=this.param.duration){this.who.alpha=this.to}},restore:function(){this.who.alpha=this.from}});var l=function(q,r){hotjs.base(this,q,r)};hotjs.inherit(l,f,{init:function(){var q=this.param;this.from=this.who.alpha;this.mid=(q.range[0]+q.range[1])/2;this.delta=(q.range[1]-q.range[0])/2},step:function(q){this.who.alpha=this.mid+this.delta*Math.sin(this.dtSum/this.param.freq*Math.PI);return false},restore:function(){this.who.alpha=this.from}});var e=function(t,r,v){var q=hotjs.Anim[r];if(typeof q!="function"){console.log(q+" not exists, using default.");q=f}return new q(t,v)};var m=function(r,q){hotjs.Anim[r]=q;return this};hotjs.Anim={register:m,create:e,MoveTo:b,StickTo:k,SlowDown:g,RotateBy:c,ScaleTo:i,ScaleLoop:a,FadeTo:j,FadeLoop:l}})();hotjs=hotjs||{};hotjs.Physics=hotjs.Physics||{};(function(){var e={g:9.8,RESTITUTION_V:0.8,RESTITUTION_H:0.95,AIR_RESISTANCE:0.2,AIR_DENSITY:0.01293,HYDROGEN_DENSITY:0.0008948,WOOD_DENSITY:0.5,WATER_DENSITY:1,IRON_DENSITY:7.8,METER:100};var f={velocityAfterCollision:function(i,k,g,j){return((i-g)*k+2*g*j)/(i+g)},airResistance:function(g,i,j){return e.AIR_RESISTANCE*e.AIR_DENSITY*g*i*j*j},airFlotage:function(g,i){return(g*g*i*e.AIR_FLOTAGE)}};var b=function(){hotjs.base(this);this.restitution=0.95};hotjs.inherit(b,hotjs.Node,{setRestitution:function(g){g=Math.min(1,Math.max(0,g));this.restitution=g;return this},getRestitution:function(){return this.restitution},collide:function(g){return this}});var c=function(){hotjs.base(this)};hotjs.inherit(c,b,{collide:function(J){var i=hotjs.Vector;var z=f.velocityAfterCollision;var I=this.size[0]/2,t=this.size[1]/2;var H=J.size[0]/2,q=J.size[1]/2;var C=[this.pos[0]+I,this.pos[1]+t];var B=[J.pos[0]+H,J.pos[1]+q];var G=(I+t)/2;var F=(H+q)/2;var m=i.sub(C,B);var v=this.getRestitution()*J.getRestitution();var r=Math.sqrt(m[0]*m[0]+m[1]*m[1]);if(r>G+F){return false}if(r<G+F){var A=1-r/(G+F);var g=i.mul(m,A);this.pos=i.add(this.pos,g);J.pos=i.sub(J.pos,g)}var K=[m[1],-m[0]];var k=i.project(this.velocity,m);var l=i.project(this.velocity,K);var j=i.project(J.velocity,m);var y=i.project(J.velocity,K);var x=z(this.mass,k[0],J.mass,j[0])*v;var w=z(this.mass,k[1],J.mass,j[1])*v;var E=z(J.mass,j[0],this.mass,k[0])*v;var D=z(J.mass,j[1],this.mass,k[1])*v;this.velocity=i.add(l,[x,w]);J.velocity=i.add(y,[E,D]);return true}});var a=function(){hotjs.base(this);this.restitution=0.6;this.gravity=e.g;this.resistance=1/2;this.meter=200};hotjs.inherit(a,hotjs.Scene,{setRestitution:function(g){g=Math.min(1,Math.max(0,g));this.restitution=g;return this},getRestitution:function(){return this.restitution},setMeter:function(g){this.meter=g;return this},setGravity:function(g){this.gravity=g*e.g;return this},getGravity:function(){return this.gravity},setResistance:function(g){this.resistance=g;return this},getResistance:function(){return this.resistance},checkBorderCollision:function(l){var y=this.getArea();for(var m=this.subnodes.length-1;m>=0;m--){var w=this.subnodes[m];var A=w.pos[0],x=w.pos[1];var k=w.size[0],j=w.size[1];var v=w.velocity[0],r=w.velocity[1];var z=((A<=y.l)&&(v<=0))||((A+k>=y.r)&&(v>=0));var t=((x<=y.t)&&(r<=0))||((x+j>=y.b)&&(r>=0));var g=v*(-this.resistance);var B=r*(-this.resistance);var q=this.restitution*w.getRestitution();if(z){v*=(-q);r*=(0.9+q*0.1)}if(t){r*=(-q);v*=(0.9+q*0.1)}else{B+=(1-e.AIR_DENSITY/w.density)*(this.gravity*this.meter)}w.velocity=[v,r];w.accel=[g,B]}return this},validatePos:function(){var j=this.getArea();for(var k=this.subnodes.length-1;k>=0;k--){var g=this.subnodes[k];px=Math.max(j.l,Math.min(j.r-g.size[0],g.pos[0]));py=Math.max(j.t,Math.min(j.b-g.size[1],g.pos[1]));g.pos=[Math.round(px),Math.round(py)]}return this},update:function(q){if(!!this.subnodes){for(var m=this.subnodes.length-1;m>=0;m--){var g=this.subnodes[m];g.update(q)}for(var m=this.subnodes.length-1;m>=1;m--){var g=this.subnodes[m];for(var l=m-1;l>=0;l--){var k=this.subnodes[l];g.collide(k)}}this.checkBorderCollision(q);this.validatePos()}return this}});hotjs.Physics.Constant=e;hotjs.Physics.Formula=f;hotjs.Physics.Node=b;hotjs.Physics.Scene=a;hotjs.Physics.Ball=c})();hotjs=hotjs||{};hotjs.Social=hotjs.Social||{};(function(){var z=function(){this.settings={url:"http://msghub.hotjs.net/api",cache:false,data:{},processData:true,type:"GET",async:false,timeout:10000,dataType:"html",crossDomain:false,context:document.body,statusCode:{403:function(){console.log("access denied.")},404:function(){console.log("url not found.")},405:function(){console.log("method not allowed.")},500:function(){console.log("server error")}}};this.msgMax=100;this.msgList=[];this.urls={}};z.prototype={config:function(P){if(P.msgMax!=undefined){this.msgMax=P.msgMax;delete P.msgMax}for(var O in P){this.settings[O]=P[O]}},configAPI:function(P){if(typeof P=="string"){this.urls._default_=P}else{if(typeof P=="object"){for(var O in P){this.urls[O]=P[O]}}}this.settings.url=this.urls._default_;return true},loadAPI:function(P,S,O){var V=this.requestMsg({module:S,version:O},P,{type:"GET"});if(!V){return false}if(!Array.isArray(V.list)){return false}var U=V.base;if(U.indexOf("://")<0){U=P.substring(0,P.lastIndexOf("/")+1)+U}for(var R=0;R<V.list.length;R++){var T=V.list[R];var Q=(T.url.indexOf("://")>-1)?T.url:(U+T.url);Q=Q.replace("/./","/");this.urls[T.api]=Q}return true},requestMsg:function(T,P,O){var U={};for(var Q in this.settings){U[Q]=this.settings[Q]}if(!!O){for(var Q in O){U[Q]=O[Q]}}if(!!T){U.data=T}if(!!P){U.url=P}U.async=false;var R=this;var S=false;$.ajax(U).done(function(W,X,V){console.log(W);W=JSON.parse(W);S=W}).fail(function(V,X,W){R.onMsgFail(V,X,W)}).complete(function(W,X,V){R.onMsgComplete(W,X,V)});return S},postMsg:function(S,P,O){var T={};for(var Q in this.settings){T[Q]=this.settings[Q]}if(!!O){for(var Q in O){T[Q]=O[Q]}}if(!!S){T.data=S}if(!!P){T.url=P}T.async=true;var R=this;$.ajax(T).done(function(V,W,U){console.log(V);V=JSON.parse(V);R.onMsgComing(V,W,U)}).fail(function(U,W,V){R.onMsgFail(U,W,V)}).complete(function(V,W,U){R.onMsgComplete(V,W,U)});return true},onMsgFail:function(O,Q,P){console.log("ajax fail");console.log(O,Q,P)},onMsgComplete:function(P,Q,O){},onMsgComing:function(Q,R,P){if(Array.isArray(Q)){for(var O=0;O<Q.length;O++){this.onMsgParse(Q[O])}}else{this.onMsgParse(Q)}},onMsgParse:function(O){},callAPI:function(P,R){var O=this.urls[P];if(!O){O=this.urls._default_}var Q=this.requestMsg({api:P,param:JSON.stringify(R)},O);if(typeof Q=="object"){return Q}return false},hello:function v(){var O=this.callAPI(arguments.callee.name,{name:"hotjs"});return(!!O)?O.name:false}};var g=function(){hotjs.base(this);this.username="";this.password="";this.app="hotjs";this.version=hotjs.version;this.session="";this.profile={};this.status={};this.tag=[];this.friends=[];this.blocks=[];this.hb_interval=5000};hotjs.inherit(g,z,{registerAccount:function w(O,R,P,Q,T){var S=this.callAPI(arguments.callee.name,{username:O,password:R,fullname:P,email:Q,cellphone:T});return(!!S)?S.done:false},deleteAccount:function G(){var O=this.callAPI(arguments.callee.name,{username:u,password:p});return(!!O)?O.done:false},login:function D(P,R,T,O,U){var S=this.callAPI(arguments.callee.name,{username:P,password:R,app:T,version:O});if((!!S)&&S.done){this.session=S.sid;this.username=P;this.password=R;this.app=T;this.version=O;if(!!U){this.hb_interval=U}var Q="u"+this.session;window[Q]=this;this.heartbeat();return true}return false},heartbeat:function K(){if(!!this.session){var O=arguments.callee.name;var R={sid:this.session,test1:[2,3,"str"],test2:{x:1,y:2}};this.postMsg({api:O,param:JSON.stringify(R)},this.urls[O]);var Q="u"+this.session;var P="window."+Q+".heartbeat()";this.hb_timer=window.setTimeout(P,this.hb_interval)}return true},logout:function M(){if(!!this.hb_timer){clearTimeout(this.hb_tiemr);var O="u"+this.session;delete window[O]}var P=this.callAPI(arguments.callee.name,{sid:this.session});this.session="";return(!!P)?P.done:false},changePassword:function J(O,P,Q){var R=this.callAPI(arguments.callee.name,{username:O,oldpwd:P,newpwd:Q});return(!!R)?R.done:false},updateProfile:function t(O){var P=this.callAPI(arguments.callee.name,{sid:this.session,profile:O});return(!!P)?P.done:false},getProfile:function N(){var O=this.callAPI(arguments.callee.name,{sid:this.session});return((!!O)&&O.done)?O.profile:false},queryProfile:function E(O){var P=this.callAPI(arguments.callee.name,{sid:this.session,user:O});return((!!P)&&P.done)?P.profile:false},listFriend:function j(){var P=this.callAPI(arguments.callee.name,{sid:this.session});if((!!P)&&P.done&&Array.isArray(P.user)){this.friends.length=0;for(var O=0;O<P.user.length;O++){this.friends.push(P.user[O].username)}return P.user}return false},addFriend:function i(Q,O){if(this.friends.indexOf(Q)>-1){return false}var P=this.callAPI(arguments.callee.name,{sid:this.session,username:Q,textmsg:O});if((!!P)&&P.done){this.friends.push(Q);return true}return false},confirmAddFriend:function m(P){if(this.friends.indexOf(P)>-1){return false}var O=this.callAPI(arguments.callee.name,{sid:this.session,username:P});if((!!O)&&O.done){this.friends.push(P);return true}return false},removeFriend:function B(Q){if(this.friends.indexOf(Q)==-1){return false}var O=this.callAPI(arguments.callee.name,{sid:this.session,username:Q});if((!!O)&&O.done){var P=this.friends.indexOf(Q);if(P>-1){this.friends.splice(P,1);return true}}return false},listBlock:function r(){var P=this.callAPI(arguments.callee.name,{sid:this.session});if((!!P)&&P.done&&Array.isArray(P.user)){this.blocks.length=0;for(var O=0;O<P.user.length;O++){this.blocks.push(P.user[O].username)}return P.user}return false},block:function x(O){if(this.friends.indexOf(O)>-1){return false}var P=this.callAPI(arguments.callee.name,{sid:this.session,username:O});if((!!P)&&P.done){this.blocks.push(O);return true}return false},unblock:function q(O){if(this.friends.indexOf(O)==-1){return false}var P=this.callAPI(arguments.callee.name,{sid:this.session,username:O});if((!!P)&&P.done){var Q=this.friends.indexOf(O);if(Q>-1){this.blocks.splice(Q,1);return true}}return false},setTag:function I(P){var Q=this.callAPI(arguments.callee.name,{sid:this.session,tag:P});if((!!Q)&&Q.done){this.tag.length=0;for(var O=0;O<P.length;O++){this.tag.push(P[O])}return true}return false},getTag:function C(){var Q=this.callAPI(arguments.callee.name,{sid:this.session});if((!!Q)&&Q.done){var P=Q.tag;this.tag.length=0;for(var O=0;O<P.length;O++){this.tag.push(P[O])}return true}return false},updateStatus:function c(P){var Q=this.callAPI(arguments.callee.name,{sid:this.session,status:P});if((!!Q)&&Q.done){for(var O in P){this.status[O]=P[O]}return true}return false},queryPresence:function H(P){var O=this.callAPI(arguments.callee.name,{sid:this.session,user:P});return((!!O)&&O.done)?O.presence:false},searchUser:function f(O,Q){var P=this.callAPI(arguments.callee.name,{sid:this.session,tag:O,distance:Q});return((!!P)&&P.done)?P.user:false},searchUserComplex:function F(O){var P=this.callAPI(arguments.callee.name,{sid:this.session,filter:O});return((!!P)&&P.done)?P.user:false},inviteJoinGroup:function e(O,P){var Q=this.callAPI(arguments.callee.name,{sid:this.session,name:O,group:P});return((!!Q)&&Q.done)?true:false},quitGroup:function y(O){var P=this.callAPI(arguments.callee.name,{sid:this.session,group:O});return((!!P)&&P.done)?true:false},chat:function L(O,P){var Q=this.callAPI(arguments.callee.name,{sid:this.session,group:P,what:O});return((!!Q)&&Q.done)?true:false},findRoom:function A(O){var P=this.callAPI(arguments.callee.name,{sid:this.session,name:O});return((!!P)&&P.done)?P.room:false},enterRoom:function l(O,P){var Q=this.callAPI(arguments.callee.name,{sid:this.session,name:O,password:P});return((!!Q)&&Q.done)?Q.name:false},leaveRoom:function a(O){var P=this.callAPI(arguments.callee.name,{sid:this.session,name:O});return((!!P)&&P.done)?true:false},say:function b(O){var P=this.callAPI(arguments.callee.name,{sid:this.session,what:O});return((!!P)&&P.done)?true:false},sms:function k(O,P){var Q=this.callAPI(arguments.callee.name,{sid:this.session,name:O,what:P});return((!!Q)&&Q.done)?true:false}});hotjs.Social.AjaxClient=z;hotjs.Social.User=g})();hotjs=hotjs||{};hotjs.Util=hotjs.Util||{};(function(){var b=null;hotjs.Util={getDeviceInfo:function(f){if(b!==null&&typeof f==="undefined"){return b}var k=null;var m=false;var g=typeof CanvasRenderingContext2D!=="undefined";var e=false;var j=false;var c=false;var l=(/chrome/i.test(f))?true:false;var f=f||navigator.userAgent;var i=0;if(/android/i.test(f)){e=true;k=f.toString().match(/android ([0-9]\.[0-9])\.?([0-9]?)/i);if(k&&k[1]){i=(parseFloat(k[1])+(k[2]?k[2]*0.01:0)).toFixed(2)}}else{if(/(iphone|ipad|ipod)/i.test(f)){j=true;k=f.toString().match(/([0-9]_[0-9])/i);if(k&&k[1]){i=parseFloat(k[1].replace(/_/,"."))}}else{m=true;if(/(MSIE)/i.test(f)){c=true;k=f.toString().match(/MSIE ([0-9])/i);if(k&&k[1]){i=parseInt(k[1],10)}}}}b={supportCanvas:g,desktop:m,android:e?i:false,ios:j?i:false,ie:c?i:false,chrome:l};return b},getBoundaryRect:function(e){var l=e[0][0];var j=e[0][0];var k=e[0][1];var g=e[0][1];for(var f=1,c=e.length;f<c;f++){l=Math.min(l,e[f][0]);j=Math.max(j,e[f][0]);k=Math.min(k,e[f][1]);g=Math.max(g,e[f][1])}return{left:l,right:j,top:k,bottom:g}},getRectPoints:function(c){return[[c.left,c.top],[c.right,c.top],[c.right,c.bottom],[c.left,c.bottom]]},cloneObject:function(c){var f={};for(var e in c){f[e]=c[e]}return f},addEventListener:function(e,g,f,c){if("addEventListener" in e){e.addEventListener(g,f,c)}else{e.attachEvent("on"+g,f,c)}},removeEventListener:function(e,g,f,c){if("removeEventListener" in e){e.removeEventListener(g,f,c)}else{e.detachEvent("on"+g,f,c)}},stopEventDefault:function(c){c=c||window.event;if("preventDefault" in c){c.preventDefault()}c.returnValue=false},getClientRect:function(f){var k=f.ownerDocument||f.document||document;var c=k.documentElement;var i=k.body;var g={};if("getBoundingClientRect" in f){var e=f.getBoundingClientRect();g.left=e.left;g.left+=c.scrollLeft||i.scrollLeft;g.top=e.top;g.top+=c.scrollTop||i.scrollTop;g.width=e.width;g.height=e.height;g.right=e.right;g.right+=c.scrollLeft||i.scrollLeft;g.bottom=e.bottom;g.bottom+=c.scrollTop||i.scrollTop}else{g.left=0;g.top=0;g.width=f.offsetWidth;g.height=f.offsetHeight;for(var j=f;j;j=j.offsetParent){g.left+=j.offsetLeft;g.top+=j.offsetTop}for(var j=f.parentNode;j;j=j.parentNode){if(j.tagName==="BODY"){break}if(j.tagName==="TR"){g.top+=2}g.left-=j.scrollLeft;g.top-=j.scrollTop}g.right=g.left+g.width;g.bottom=g.top+g.height}return g}};if(hotjs.Util.getDeviceInfo().ios){window.addEventListener("load",function(){setTimeout(function(){document.body.scrollTop=0},300)})}if(!Function.prototype.bind){Function.prototype.bind=function(c){if(typeof this!=="function"){throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable")}var i=Array.prototype.slice.call(arguments,1),g=this,e=function(){},f=function(){return g.apply(this instanceof e?this:c,i.concat(Array.prototype.slice.call(arguments)))};e.prototype=this.prototype;f.prototype=new e();return f}}var a=function(){hotjs.base(this);this.nMin=1;this.nMax=500;this.loopBench=false;this.fpsData=[];this.dtSumB=0;this.nCur=this.nMax;this.marginFormula=40;this.formula=false};hotjs.inherit(a,hotjs.View,{setBenchmarkRange:function(e,c){this.nMin=Math.min(e,c);this.nMax=Math.max(e,c);this.nCur=this.nMax;return this},showFormula:function(c){if(c==undefined){c=(!this.formula)}this.formula=c;return this},benchFPS:function(f,c,e){this.nMin=f;this.nMax=c;this.fpsData=[];this.dtSumB=0;this.nCur=this.nMin;this.loopBench=(!!e);return true},benchStop:function(){this.nCur=this.nMax;return true},update:function(c){a.supClass.update.call(this,c);if(this.nCur<this.nMax){this.dtSumB+=c;if(this.dtSumB>=0.2){this.dtSumB=0;this.curScene.addItem();this.nCur++;var e=(this.height()-this.marginFormula*2)/60;this.fpsData.push(e*this.fps);if(this.nCur>=this.nMax){if(!!this.loopBench){this.nCur=this.nMin;this.fpsData.length=0}}}}return true},drawFormula:function(q){q.save();var j=this.marginFormula,l=this.height()-this.marginFormula;var e=this.width()-this.marginFormula*2,k=this.height()-this.marginFormula*2;q.beginPath();q.strokeStyle="black";q.fillStyle="black";for(var g=0;g<6;g++){q.beginPath();q.moveTo(j,this.marginFormula+g*k/6);q.lineTo(j+e,this.marginFormula+g*k/6);q.stroke()}q.beginPath();q.moveTo(j,this.marginFormula);q.lineTo(j,l);q.lineTo(this.width()-this.marginFormula,l);q.stroke();q.fillText("60 fps",j-20,this.marginFormula-10);q.fillText(""+this.nMax,this.width()-this.marginFormula-20,l+20);q.beginPath();q.strokeStyle="red";var m=e/(this.nMax-this.nMin);if(this.fpsData.length>0){q.moveTo(j,l-this.fpsData[0]);for(var g=1;g<this.fpsData.length;g++){q.lineTo(j+g*m,l-this.fpsData[g])}}q.stroke();q.restore()},draw:function(e){a.supClass.draw.call(this,e);if(this.formula){this.drawFormula(e)}}});hotjs.Util.BenchLab=a})();(function(){var a=function(){hotjs.base(this);this.subnodes=[];this.param={width:300,height:400,margin:20,padding:10,rows:1,cols:1,dir:0}};hotjs.inherit(a,hotjs.Node,{addNode:function(b){a.supClass.addNode.call(this,b);this.updateLayout();return this},setParam:function(c){for(var b in c){this.param[b]=c[b]}if(this.param.dir==0){this.setMoveable(true,false)}else{this.setMoveable(false,true)}this.updateLayout();return this},fixPos:function(){if(this.pos[0]>0){this.pos[0]=0}if(this.pos[1]>0){this.pos[1]=0}var b=this.container.width()-this.size[0];var c=this.container.height()-this.size[1];if(this.pos[0]<b){this.pos[0]=b}if(this.pos[1]<c){this.pos[1]=c}},onTouchEnd:function(f){a.supClass.onTouchEnd.call(this,f);var c=this.pos;var j=this.param;if(j.dir==0){var i=Math.floor(this.pos[0]/j.width)*j.width;var e=i+j.width;if(e>=j.width){e=0}if(this.gesture[0]<=0){c=[i,c[1]]}else{c=[e,c[1]]}}else{var g=Math.floor(this.pos[1]/j.height)*j.height;var b=g+j.height;if(b>j.height){b=0}if(this.gesture[1]<=0){c=[c[0],g]}else{c=[c[0],b]}}hotjs.Anim.create(this,"MoveTo",{to:c,duration:0.3}).play()},updateLayout:function(){var t=this.subnodes;var m=this.param;var A=m.margin||0;var z=m.padding||0;var x=m.spacing||0;var f=m.rows||1;var j=m.cols||1;var q=m.dir?1:0;var g=m.width||300;g-=A*2;var y=m.height||400;y-=A*2;var b=g/j,k=y/f;var B=0,l=0;for(var v=0,e=0,c=0;v<t.length;v++){var r=t[v];r.pos[0]=b*(c+j*B)+A*(1+B*2)+(b-r.size[0])/2;r.pos[1]=k*(e+f*l)+A*(1+l*2)+(k-r.size[1])/2;if(++c>=j){c=0;if(++e>=f){e=0;if(q){l++}else{B++}}}}B++;l++;if(c==0&&e==0){if(q){if(l>1){l--}}else{if(B>1){B--}}}this.size[0]=(b*j+A*2)*B;this.size[1]=(k*f+A*2)*l;return this},draw:function(F){F.save();var A=this.subnodes;var v=this.param;var G=v.margin||0;var E=v.padding||0;var C=v.spacing||0;var l=v.rows||1;var q=v.cols||1;var z=v.dir?1:0;var g=v.width||300;g-=G*2;var I=v.height||400;I-=G*2;var b=g/q,r=I/l;for(var B=0,f=0,e=0,H=0,t=0;B<A.length;B++){var k=b*(e+q*H)+G*(1+H*2)+C;var j=r*(f+l*t)+G*(1+t*2)+C;var m=b-C*2;var D=r-C*2;if(!!this.bgcolor){F.fillStyle=this.bgcolor;F.fillRect(k,j,m,D)}if(!!this.color){F.strokeStyle=this.color;F.strokeRect(k,j,m,D)}if(++e>=q){e=0;if(++f>=l){f=0;if(z){t++}else{H++}}}}F.restore();return this}});hotjs.ShowBoard=a})();hotjs.domUI=hotjs.domUI||{};(function(){var b="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYxIDY0LjE0MDk0OSwgMjAxMC8xMi8wNy0xMDo1NzowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNS4xIE1hY2ludG9zaCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpFNTQ4MDYzRUUzRjcxMUUyOURFRUYzMDcwRjUyN0U4OSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpFNTQ4MDYzRkUzRjcxMUUyOURFRUYzMDcwRjUyN0U4OSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjJGRTkyMTc1RTNGMDExRTI5REVFRjMwNzBGNTI3RTg5IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjJGRTkyMTc2RTNGMDExRTI5REVFRjMwNzBGNTI3RTg5Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8++2P9ygAACSZJREFUeNrkV3uM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";var f=function(g){var i=g;if(typeof i=="string"){i=document.getElementById(i)}if(typeof i=="object"&&i&&i.parentNode){i.parentNode.removeChild(i)}};var a=function(g){var i=g;if(typeof i=="string"){i=document.getElementById(i)}if(i.style.display=="none"){i.style.display="block"}else{i.style.display="none"}};var e=function(i,l,k){if(!i){f("hotjs_splash_win");return}var q=document.getElementById("hotjs_splash_win");if(!q){q=document.createElement("div");q.setAttribute("id","hotjs_splash_win");q.style.position="absolute";q.style.display="none";document.body.appendChild(q)}var m=$(q);if(typeof l=="string"){q.innerHTML=("<table style='width:100%;height:100%;'><tr><td class='m'>"+l+"<br/><div id='hotjs_res_loading_win'></div></td></tr></table>")}if(typeof k=="string"){q.style=k}else{if(typeof k=="object"){m.css(k)}}var g=window.innerWidth,j=window.innerHeight;m.css({margin:"0px",padding:"0px",top:"0px",left:"0px",width:g+"px",height:j+"px","text-align":"center","vertical-align":"middle",position:"absolute","z-index":"999",display:"block"})};var c=function(z,x,y,j,m){z=z||"dialog";x=x||"";j=j||{};y=y||{};m=m||"<img src='"+b+"'>";var A="DLG"+Date.now();var g=document.createElement("div");document.body.appendChild(g);var v=$(g);v.attr("id",A);v.attr("class","dialog");v.css({position:"absolute",display:"none"});var k="";for(var r in y){var q=A+r;k+="<button class='dialog' id='"+q+"' v='"+r+"'>"+hotjs.i18n.get(r)+"</button> "}var l=A+"X";m=m.replace("<img","<img id='"+l+"'");g.innerHTML="<table class='m'><tr><td class='i'></td><td>"+z+"</td><td class='i r'>"+m+"</td></tr><tr><td colspan=3 class='dialog'>"+x+"</td></tr><tr><td colspan=3 class='m'>"+k+"</td></tr></table>";$("img#"+l).on("click",function(){f(A)});for(var r in y){var q=A+r;$("button#"+q).on("click",function(){var w=$(this).attr("v");var C=y[w];if(C()){f(A)}})}var B=window.innerWidth,t=window.innerHeight;v.css({top:((t-v.height())/2-10)+"px",left:(B-v.width())/2+"px",display:"block"});if(typeof j=="string"){g.style=j+";position:absolute;"}else{v.css(j)}return g};hotjs.domUI={pngX:b,dismiss:f,toggle:a,showSplash:e,popupDialog:c}})();hotjs=hotjs||{};hotjs.i18n={defaultLang:"en",cookievalid:86400000,text:{},put:function(e,c){if(this.text[e]===undefined){this.text[e]={}}var a=this.text[e];for(var b in c){a[b]=c[b]}return this},extractLang:function(c){var e;for(var a in c){var b=c[a].split("=");if(b[0]==="lang"){e=b[1].length>2?(b[1].charAt(0)+b[1].charAt(1)):b[1]}}return e},getUrlLang:function(){if(window.location.search.length<2){return undefined}return this.extractLang(window.location.search.substring(1).split("&"))},getCookieLang:function(){return this.extractLang(document.cookie.split("; "))},getLang:function(){if(typeof this.lang!=="string"){if(typeof(this.lang=this.getUrlLang())==="string"){}else{if(typeof(this.lang=this.getCookieLang())==="string"){}else{if(typeof(this.lang=navigator.language)==="string"){}else{if(typeof(this.lang=navigator.userLanguage)==="string"){}else{this.lang=this.defaultLang}}}}if(this.lang.length>2){this.lang=this.lang.charAt(0)+this.lang.charAt(1)}}return this.lang},setLang:function(f,a){this.lang=f;if(a){var e=window.location,b=new Date(),c=b.getTime();c+=this.cookievalid;b.setTime(c);document.cookie="lang="+f+";path="+e.pathname+";domain="+e.host+";expires="+b.toGMTString()}return this},get:function(a){var b=a.split("."),e=this.getLang(),c=this.text[e];while(typeof c!=="undefined"&&b.length>0){c=c[b.shift()]}return typeof c==="undefined"?e+"."+a:c},t1:function(c){if(typeof c==="object"&&c instanceof Element){var b=$(c),a=b.attr("i18n");b.removeClass("I18N");if(typeof a==="undefined"){a=b.text()}b.attr("i18n",a).text(this.get(a))}return this},translate:function(b){var c=this.getLang();if(typeof this.text[c]==="undefined"){resources.load("lang/"+c+".lang.js");return this}if(typeof b==="undefined"){b=$("[I18N]");$(".I18N").each(function(){if(!$.contains(b,this)){b=b.add(this)}})}if(b instanceof jQuery){for(var a in b){this.t1(b[a])}}else{this.t1(b)}return this}};hotjs=hotjs||{};hotjs.AI=hotjs.AI||{};(function(){var f=function(){hotjs.base(this)};hotjs.inherit(f,hotjs.Class,{startup:function(g){},solve:function(g){return{}},reset:function(){},shutdown:function(){}});var b=function(){hotjs.base(this);this.data=[];this.mapping=[]};hotjs.inherit(b,f,{init:function(g,j,i){this.data=hotjs.Matrix.create(g,j,i);this.resetMapping();return this},setValue:function(g){this.data=hotjs.Matrix.setValue(this.data,g);return this},rows:function(){return this.data.length},resetMapping:function(){var t=this.data;var w=[];for(var q=0,g=t.length;q<g;q++){var v=t[q],l=[];for(var k=0,x=v.length;k<x;k++){l.push([k,q])}w.push(l)}this.mapping=w;return this},clone:function(){var g=new (this.constructor)();g.data=hotjs.Matrix.copy(this.data);g.mapping=hotjs.Matrix.copy(this.mapping);return g},copy:function(g){this.data=hotjs.Matrix.copy(g.data);this.mapping=hotjs.Matrix.copy(g.mapping);return this},getData:function(){return this.data},getMapping:function(){return this.mapping},importData:function(g){this.data=hotjs.Matrix.copy(g);this.resetMapping();return this},importDataFromString:function(i,j,g){this.data=hotjs.Matrix.fromString(i,j,g);this.resetMapping();return this},toString:function(i,g){return hotjs.Matrix.toString(this.data,i,g)},exchangeValue:function(x,v){var q=this.data;for(var l=0,g=q.length;l<g;l++){var t=q[l];for(var k=0,w=t.length;k<w;k++){if(t[k]==x){t[k]=v}else{if(t[k]==v){t[k]=x}}}}return this},countValue:function(k){var y=0;var t=this.data;for(var q=0,g=t.length;q<g;q++){var w=t[q];for(var l=0,x=w.length;l<x;l++){if(w[l]==k){y++}}}return y},setValueByPos:function(g,j,i){this.data[j][g]=i;return this},getValuebyPos:function(g,i){return this.data[i][g]},getPosByValue:function(k){var w=[];var t=this.data;for(var q=0,g=t.length;q<g;q++){var x=t[q];if(Number(x.join(""))===0){continue}for(var l=0,y=x.length;l<y;l++){if(x[l]===k){w.push([l,q])}}}return w},inverse:function(){this.data=hotjs.Matrix.inverse(this.data);this.mapping=hotjs.Matrix.inverse(this.mapping);return this},flipLeftRight:function(){var y=[],g=[];var k=this.data,v=this.mapping;for(var x=0,r=k.length;x<r;x++){var B=k[x],A=[],q=v[x],z=[];for(var w=0,l=B.length;w<l;w++){A.push(B[l-1-w]);z.push(q[l-1-w])}y.push(A);g.push(z)}this.data=y;this.mapping=g;return this},flipUpDown:function(){var j=[],g=[];var l=this.data,m=this.mapping;for(var k=l.length-1;k>=0;k--){j.push(l[k]);g.push(m[k])}this.data=j;this.mapping=g;return this},leanRight45:function(){var y=[],g=[];var k=this.data,r=this.mapping;var q=k.length,l=k[0].length;var v=q+l-1;for(var x=0;x<v;x++){var A=[],z=[];for(var w=0;w<=x;w++){if((x-w)<q&&w<l){A.push(k[x-w][w]);z.push(r[x-w][w])}}y.push(A);g.push(z)}this.data=y;this.mapping=g;return this},leanLeft45:function(){var y=[],g=[];var k=this.data,r=this.mapping;var q=k.length,l=k[0].length;var v=q+l-1;for(var x=0;x<v;x++){var A=[],z=[];for(var w=x;w>=0;w--){if((x-w)<q&&w<l){A.push(k[x-w][l-1-w]);z.push(r[x-w][l-1-w])}}y.push(A);g.push(z)}this.data=y;this.mapping=g;return this}});var c=function(){hotjs.base(this);this.patterns=[];this.char_style={level:1,think_time:500,attack_factor:1.2}};hotjs.inherit(c,f,{genPattern:function a(j){if(j==undefined){j=""}if(j.length<5){var g=a(j+"2"),i=a(j+".");while(s=i.shift()){g.push(s)}return g}return[j]},initPattern:function(){var g=this.genPattern();for(var l=g.length-1;l>=0;l--){var r=g[l];var t=0;var q=[];for(var k=r.length-1;k>=0;k--){if(r[k]=="2"){t++}else{q.push(k)}}if(t>=1){var m=[r,t,Math.pow(10,(t-1)),q];this.patterns.push(m)}else{}}this.addPattern([".2222.",0,5000,[0,5]]);return this},addPattern:function(k){var l=this.patterns;for(var g=l.length-1;g>=0;g--){var j=l[g];if(j[0]==k[0]){j[2]=k[2];return this}}this.patterns.push(k);return this},setColor:function(l){l=""+l;var k=this.patterns;for(var g=k.length-1;g>=0;g--){var j=k[g];if(j[0].indexOf(l)==-1){if(l=="1"){j[0]=j[0].replace(/2/g,l)}else{j[0]=j[0].replace(/1/g,l)}}}return this},setCharStyle:function(g){this.char_style={level:g.level,think_time:g.think_time,attack_factor:g.attack_factor};return this},getCharStyle:function(){return this.char_style},findHits:function(g,z){var Q=this.patterns;var I=[];I.push(g);I.push(g.clone().inverse());I.push(g.clone().leanRight45());I.push(g.clone().leanLeft45());var v=hotjs.Matrix.setValue(hotjs.Matrix.copy(g.getData()),0);var w=[];for(var J=0;J<I.length;J++){var m=I[J].getData();var L=I[J].getMapping();var E=hotjs.Matrix.setValue(hotjs.Matrix.copy(m),0);for(var M=m.length-1;M>=0;M--){var C=m[M];var H=C.join("");var O=E[M];var P=L[M];for(var K=Q.length-1;K>=0;K--){var G=Q[K];var t=G[0];var N=G[1];var A=G[2]*z;var l=G[3];var F=-1;while((F=H.indexOf(t,F+1))!=-1){if(N==5){var B=[];for(var D=4;D>=0;D--){B.push(P[F+D])}w.push(B)}else{for(var D=l.length-1;D>=0;D--){var y=F+l[D];if(C[y]=="."){O[y]+=A}}}}}for(var K=O.length-1;K>=0;K--){var q=P[K];v[q[1]][q[0]]+=O[K]}}}return{hitRating:v,winHits:w}},getBestMove:function(m){var l=Math.floor(m.length/2);var z=l,w=l,g=1;for(var t=m.length-1;t>=0;t--){var k=m[t];for(var q=k.length-1;q>=0;q--){var v=k[q];if(v>g){z=q;w=t;g=v}}}return[z,w,g]},getTopMoves:function(w,A){var m=Math.floor(w.length/2);var l=[[m,m,1]];for(var y=w.length-1;y>=0;y--){var g=w[y];for(var x=g.length-1;x>=0;x--){var z=g[x];var t=[x,y,z];var q=l.length;for(var v=0;v<q;v++){if(z>l[v][2]){l.splice(v,0,t);break}}if(l.length==q){if(q<A){l.push(t)}}if(l.length>A){l.pop()}}}return l},solve:function(q){var l=new hotjs.AI.Matrix();if(Array.isArray(q)){l.importData(q)}else{l.importDataFromString(q)}var i=this.findHits(l,this.char_style.attack_factor);var j=this.findHits(l.clone().exchangeValue("1","2"),1);var g=hotjs.Matrix.add(i.hitRating,j.hitRating);var k=this.getTopMoves(g,5);var m=(k.length>0)?k[0]:[Math.floor(l.rows()/2),Math.floor(l.rows()/2),1];return{myWinHits:i.winHits,peerWinHits:j.winHits,bestMove:m,topMoves:k,hitRating:g}},deepThinking:function(A,m){if(typeof m=="undefined"){m=this.char_style.level-1}var y=new hotjs.AI.Matrix();if(Array.isArray(A)){y.importData(A)}else{y.importDataFromString(A)}var v=this.findHits(y,this.char_style.attack_factor);var r=this.findHits(y.clone().exchangeValue("1","2"),1);var g=hotjs.Matrix.add(v.hitRating,r.hitRating);var t=this.getTopMoves(g,5);var x=(t.length>0)?t[0]:[Math.floor(y.rows()/2),Math.floor(y.rows()/2),1];var q=(v.winHits.length==0)&&(r.winHits.length==0);var j=(x[2]<10000);if(q&&j&&(m>1)){for(var l=0;l<t.length;l++){var k=t[l];var w=y.clone();w.setValueByPos(k[0],k[1],(w.countValue("1")<=w.countValue("2")?"1":"2"));var z=this.deepThinking(w.data,m-1);if(z.myWinHits.length>0){k[2]+=5000}else{if(z.peerWinHits.length>0){k[2]-=5000}else{k[2]+=z.bestMove[2]/2}}g[k[1]][k[0]]=k[2]}t.sort(function(B,i){if(B[2]>i[2]){return -1}else{if(B[2]<i[2]){return 1}}return 0})}return{myWinHits:v.winHits,peerWinHits:r.winHits,bestMove:x,topMoves:t,hitRating:g}},solveDeep:function(k){var j=Date.now();var g=this.deepThinking(k,this.char_style.level);var i=Date.now()-j;return g}});var e=function(){hotjs.base(this)};hotjs.inherit(e,f,{solve:function(i){var g=i.matrix;var l=i.from;var k=i.to;var j=[];return j}});hotjs.AI.BasicAI=f;hotjs.AI.Matrix=b;hotjs.AI.GomokuAI=c;hotjs.AI.PathFinder=e})();