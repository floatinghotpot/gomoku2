var hotjs=hotjs||{};(function(){hotjs.version=1;hotjs.inherit=function(f,e,j){function g(){}g.prototype=e.prototype;f.prototype=new g();f.prototype.constructor=f;f.supClass=e.prototype;f.supClass.constructor=e;for(var i in j){if(j.hasOwnProperty(i)&&i!=="prototype"){f.prototype[i]=j[i]}}};hotjs.base=function(k,e,q){var i=arguments.callee.caller;if(i.supClass){var g=Array.prototype.slice.call(arguments,1);var l=i.supClass.constructor;return l.apply(k,g)}var g=Array.prototype.slice.call(arguments,2);var m=false;for(var j=k.constructor;j;j=j.supClass&&j.supClass.constructor){if(j.prototype[e]===i){m=true}else{if(m){return j.prototype[e].apply(k,g)}}}if(k[e]===i){return k.constructor.prototype[e].apply(k,g)}else{throw Error("hotjs.base must be called in constructor")}};hotjs.log=function(j,k){if(typeof k=="undefined"){k=0}var f="";for(var e=0;e<k;e++){f+="  "}if(typeof j=="object"){console.log(f+typeof j+" {");for(var g in j){if(typeof j[g]=="object"){console.log(f+"  "+g+" ("+typeof j[g]+") = ");hotjs.log(j[g],k+1)}else{console.log(f+"  "+g+" ("+typeof j[g]+") = "+j[g])}}console.log(f+"}")}else{console.log(j)}};if(typeof Array.prototype.indexOf!=="function"){Array.prototype.indexOf=function(k,g){if(g==null||g==undefined){g=0}else{if(g<0){g=Math.max(0,this.length+g)}}for(var f=g,e=this.length;f<e;f++){if(this[f]===k){return f}}return -1}}if(typeof String.prototype.endsWith!=="function"){String.prototype.endsWith=function(e){return this.indexOf(e,this.length-e.length)!==-1}}hotjs.formatString=function(){var j=[];for(var g=0,e=arguments.length;g<e;g++){j.push(arguments[g])}var f=j[0];j.shift();return f.replace(/\{(\d+)\}/g,function(i,k){return j[k]})};hotjs.formatNumber=function(e,g){var f=""+e;while(f.length<g){f="0"+f}return f};hotjs.getFileName=function(e){return e.substring(e.lastIndexOf("/")+1)};hotjs.getDirPath=function(e){return e.substring(0,e.lastIndexOf("/"))};hotjs.getAbsPath=function(g,e){if(g.indexOf("://")>-1){return g}d=hotjs.getDirPath(e);do{if(g.substring(0,2)=="./"){g=g.substring(2);continue}if(d.length==0){break}if(g.substring(0,3)=="../"){g=g.substring(3);d=hotjs.getDirPath(d);continue}if(d.length>0){g=d+"/"+g;break}}while(1);return g};hotjs.require=function(l){var m=document,j="script";var g=m.getElementsByTagName(j);var k=g[g.length-1].src;l=hotjs.getAbsPath(l,k);for(var e=0;e<g.length;e++){if(g[e].src==l){return}}o=m.createElement(j);o.async=0;o.src=l;g[0].parentNode.insertBefore(o,g[0])};if(typeof requireScripts=="function"){hotjs.require=requireScripts}else{requireScripts=hotjs.require}var c=function(){this.elements=new Array();this.size=function(){return this.elements.length};this.isEmpty=function(){return(this.elements.length<1)};this.clear=function(){this.elements=new Array()};this.put=function(g,e){var j=false;for(var f=0;f<this.elements.length;f++){if(this.elements[f].key==g){j=true;this.elements[f].value=e;break}}if(j==false){this.elements.push({key:g,value:e})}};this.remove=function(g){var k=false;try{for(var f=0;f<this.elements.length;f++){if(this.elements[f].key==g){this.elements.splice(f,1);return true}}}catch(j){k=false}return k};this.get=function(g){try{for(var f=0;f<this.elements.length;f++){if(this.elements[f].key==g){return this.elements[f].value}}}catch(j){return null}};this.element=function(e){if(e<0||e>=this.elements.length){return null}return this.elements[e]};this.containsKey=function(g){var k=false;try{for(var f=0;f<this.elements.length;f++){if(this.elements[f].key==g){k=true;break}}}catch(j){k=false}return k};this.containsValue=function(f){var k=false;try{for(var g=0;g<this.elements.length;g++){if(this.elements[g].value==f){k=true;break}}}catch(j){k=false}return k};this.values=function(){var e=new Array();for(var f=0;f<this.elements.length;f++){e.push(this.elements[f].value)}return e};this.keys=function(){var e=new Array();for(var f=0;f<this.elements.length;f++){e.push(this.elements[f].key)}return e}};var b=0;hotjs.Class=function(){b++;this.oid=b};hotjs.Class.prototype={getObjectNumber:function(){return b},addNode:function(e,f){return this},setContainer:function(e){this.container=e;return this},addTo:function(e,f){this.setContainer(e);e.addNode(this,f);return this}};var a=function(){hotjs.base(this);this.res=[];this.modules=[]};hotjs.inherit(a,hotjs.Class,{init:function(){},exit:function(){},addRes:function(e){this.res.push(e);return this},getRes:function(){return this.res},addNode:function(e){this.modules.push(e);return this},start:function(){for(var e=0;e<this.modules.length;e++){this.modules[e].start()}return this},resume:function(e){for(var f=0;f<this.modules.length;f++){this.modules[f].resume(e)}return this},pause:function(){for(var e=0;e<this.modules.length;e++){this.modules[e].resume(false)}return this},stop:function(){for(var e=0;e<this.modules.length;e++){this.modules[e].stop()}return this}});hotjs.HashMap=c;hotjs.App=a})();hotjs=hotjs||{};(function(){var c={Float:function(g,f){return((Math.random()*(f-g))+g)},Integer:function(g,f){return Math.floor((Math.random()*(f-g))+g)},Color:function(g,f){var j=c.Integer(g,f);var i=c.Integer(g,f);var k=c.Integer(g,f);return("#"+j.toString(16)+i.toString(16)+k.toString(16))}};var a={copy:function(f){return[f[0],f[1]]},vert:function(f){return[f[1],-f[0]]},add:function(g,f){return[g[0]+f[0],g[1]+f[1]]},sub:function(g,f){return[g[0]-f[0],g[1]-f[1]]},mul:function(f,g){return[f[0]*g,f[1]*g]},scale:function(f,g){return[f[0]*g[0],f[1]*g[1]]},scaleDown:function(f,g){return[f[0]/g[0],f[1]/g[1]]},getLength:function(f){return Math.sqrt(f[0]*f[0]+f[1]*f[1])},norm:function(f){var g=1/Math.sqrt(f[0]*f[0]+f[1]*f[1]);return[f[0]*g,f[1]*g]},angle:function(g){var f=Math.acos(g[0]/Math.sqrt(g[0]*g[0]+g[1]*g[1]));if(g[1]<0){f=-f}return f},project:function(t,r){var j=t[0],i=t[1];var f=r[0],x=r[1];var l=Math.atan2(i,j);var k=Math.atan2(x,f);var g=l-k;var w=Math.sqrt(j*j+i*i)*Math.cos(g);var q=w*Math.cos(k);var m=w*Math.sin(k);return[q,m]},inRect:function(f,g){return((f[0]>=g[0])&&(f[0]<g[0]+g[2]))&&((f[1]>=g[1])&&(f[1]<g[1]+g[3]))},inCircle:function(i,g,f){return((i[0]-g[0])*(i[0]-g[0])+(i[1]-g[1])*(i[1]-g[1])<=(f*f))}};var b={create:function(f,w,g){if(g==undefined){g=0}var q=[];for(var l=0;l<f;l++){var t=[];for(var k=0;k<w;k++){t.push(g)}q.push(t)}return q},copy:function(v){var k=[];for(var l=0,f=v.length;l<f;l++){var q=v[l],t=[];for(var g=0,w=q.length;g<w;g++){t[g]=q[g]}k.push(t)}return k},copyDeep:function e(k){if(Array.isArray(k)){var g=[];for(var j=0,f=k.length;j<f;j++){g.push(b.copyDeep(k[j]))}return g}else{return k}},isEqual:function(l,g){if(l.length<1||g.length<1){return false}if(l.length!=g.length){return false}if(l[0].length!=g[0].length){return false}for(var t=0,f=l.length;t<f;t++){var q=l[t],k=g[t];for(var r=0,v=q.length;r<v;r++){if(q[r]!=k[r]){return false}}}return true},add:function(k,g){var x=[];for(var w=0,q=k.length;w<q;w++){var f=[],z=k[w],y=g[w];for(var v=0,l=z.length;v<l;v++){f[v]=z[v]+y[v]}x.push(f)}return x},sub:function(k,g){var x=[];for(var w=0,q=k.length;w<q;w++){var f=[],z=k[w],y=g[w];for(var v=0,l=z.length;v<l;v++){f[v]=z[v]-y[v]}x.push(f)}return x},mul:function(){},setValue:function(f,w){var t=[];for(var q=0,k=f.length;q<k;q++){var x=f[q],r=[];for(var l=0,g=x.length;l<g;l++){r.push(w)}t.push(r)}return t},convert:function(f,k){var v=[];for(var r=0,l=f.length;r<l;r++){var w=f[r],t=[];for(var q=0,g=w.length;q<g;q++){t.push(k(w[q]))}v.push(t)}return v},inverse:function(r){var f=r.length;var t=r[0].length;var k=b.create(t,f);for(var l=0;l<f;l++){var q=r[l];for(var g=0;g<t;g++){k[g][l]=q[g]}}return k},toString:function(k,q,j){if(q==undefined){q=""}if(j==undefined){j="|"}var l=[];for(var g=0,f=k.length;g<f;g++){l.push(k[g].join(q))}return l.join(j)},fromString:function(k,m,j){if(m==undefined){m=""}if(j==undefined){j="|"}var g=[];var l=k.split(j);for(var f=0;f<l.length;f++){g.push(l[f].split(m))}return g},log:function(j){for(var g=0,f=j.length;g<f;g++){console.log(j[g])}}};hotjs.Random=c;hotjs.Vector=a;hotjs.Matrix=b})();(function(){var K="data:image/gif;base64,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";var H="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYxIDY0LjE0MDk0OSwgMjAxMC8xMi8wNy0xMDo1NzowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNS4xIE1hY2ludG9zaCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpFNTQ4MDYzRUUzRjcxMUUyOURFRUYzMDcwRjUyN0U4OSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpFNTQ4MDYzRkUzRjcxMUUyOURFRUYzMDcwRjUyN0U4OSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjJGRTkyMTc1RTNGMDExRTI5REVFRjMwNzBGNTI3RTg5IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjJGRTkyMTc2RTNGMDExRTI5REVFRjMwNzBGNTI3RTg5Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8++2P9ygAACSZJREFUeNrkV3uM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";var P={};var A=null;var O=0;var I=0;var w=false;function L(Q){if(Q.endsWith("ogg")){return(Q.indexOf("video")>-1)}else{return(Q.endsWith("mp4")||Q.endsWith("webm"))}}function f(Q){if(Q.endsWith("ogg")){return(Q.indexOf("video")==-1)}else{return(Q.endsWith("mp3")||Q.endsWith("wav"))}}function F(){var R=true;for(var Q in P){if(P.hasOwnProperty(Q)&&!P[Q]){R=false}}return R}function M(S,V,T){var R=Math.round(100*V/T);var U=document.getElementById("loading_msg");if(U){U.innerHTML=R+"% ("+V+"/"+T+")";if(w){for(var Q in P){if(P[Q]==false){U.innerHTML+="<br/>"+Q}}}}}function B(Q){var R=document.getElementById("loading_msg");if(R){R.innerHTML="error loading: "+Q.substring(Q.lastIndexOf("/")+1)}}function r(){d=document.getElementById("hotjs_res_loading_win");if(d){d.parentNode.removeChild(d)}}var k=[r];var m=[M];var z=[B];function e(Q){k=[r,Q]}function g(Q){m=[M,Q]}function l(Q){z=[B,Q]}function b(){var R=window.innerWidth,T=window.innerHeight;var S=100,U=300;var Q=(R-S)/2,W=(T-U)/2;var V=document.getElementById("hotjs_res_loading_win");if(V==undefined){V=document.createElement("div");V.setAttribute("id","hotjs_res_loading_win");V.setAttribute("style","left:"+Q+"px;top:"+W+"px;width:"+S+"px;text-align:center;alpha:0.5;background:silver;border:solid silver 1px;padding:10px;display:solid;position:absolute;-moz-border-radius:10px;-webkit-border-radius: 10px;-khtml-border-radius: 10px;border-radius: 10px;");document.body.appendChild(V)}V.style["font-family"]="Verdana,Geneva,sans-serif";V.style["font-size"]="9pt";V.innerHTML="<img id='loading_img' src='"+K+"'/>";V.innerHTML+="<br><br><div id='loading_msg'>0%</div>";V.style.display="block"}function t(Q,R){readyCallbaks=[r];m=[M];z=[B];if(R!=undefined){if(typeof R.ready=="function"){k=[r,R.ready]}if(typeof R.loading=="function"){m=[M,R.loading]}if(typeof R.error=="function"){z=[B,R.error]}}if(Q instanceof Array){Q.forEach(function(S){N(S)})}else{N(Q)}if(!F()){b()}}function a(R){R=hotjs.getAbsPath(R,document.location.href);if(P.hasOwnProperty(R)){delete P[R]}if(R.endsWith(".js")){var Q=document.getElementsByTagName("script");for(var S=0;S<Q.length;S++){if(R==hotjs.getAbsPath(Q[S].src,document.location.href)){Q[S].parentNode.removeChild(Q[S])}}}else{if(R.endsWith(".css")){var Q=document.getElementsByTagName("link");for(var S=0;S<Q.length;S++){if(R==hotjs.getAbsPath(Q[S].href,document.location.href)){Q[S].parentNode.removeChild(Q[S])}}}else{}}}function E(Q){if(Q instanceof Array){Q.forEach(function(R){a(R)})}else{a(Q)}}function N(R){R=hotjs.getAbsPath(R,document.location.href);if(R in P){return}else{var V;var X=L(R),S=f(R),aa=R.endsWith(".js"),Y=R.endsWith(".css");if(X){V=new Video()}else{if(S){V=new Audio()}else{if(aa){var Z=document.getElementsByTagName("script");for(var U=0;U<Z.length;U++){if(Z[U].src==R){return Z[U]}}V=document.createElement("script")}else{if(Y){var Z=document.getElementsByTagName("link");for(var U=0;U<Z.length;U++){if(Z[U].href==R){return Z[U]}}V=document.createElement("link");V.setAttribute("rel","stylesheet")}else{V=new Image()}}}}P[R]=false;O++;var T=function(){P[R]=V;if(A!=null){if(typeof A.addRes=="function"){A.addRes(R)}}I++;if(w){console.log(R+" preloaded ("+I+"/"+O+")")}if(R.endsWith(".sprite.js")){var ag=hotjs.getFileName(R);if(ag in sprite_cache){var af=sprite_cache[ag];af.url=R;var ab=af.images;for(id in ab){var ah=ab[id];var ad=hotjs.getAbsPath(ah[0],R);ah[2]=ad;N(ad)}}}else{if(R.endsWith(".pst.js")){var ag=hotjs.getFileName(R);if(ag in pst_cache){var ac=pst_cache[ag]["launchers"];for(var ae=0;ae<ac.length;ae++){resurl=hotjs.getAbsPath(ac[ae].res,R);ac[ae].resurl=resurl;N(resurl)}}}}m.slice(0).forEach(function(ai){ai(R,I,O)});if(F()){if(w){console.log("resources ready.")}k.slice(0).forEach(function(ai){ai()})}};var W=function(){if(w){console.log(R+" preloaded ("+I+"/"+O+")")}z.slice(0).forEach(function(ab){ab(R)})};V.addEventListener("error",W);if(X||S){V.addEventListener("canplay",T);V.setAttribute("preload","auto");var Q=document.getElementById("hotjs_media_lib");if(!Q){Q=document.createElement("div");Q.setAttribute("id","hotjs_media_lib");Q.style.display="none";document.body.appendChild(Q)}Q.appendChild(V);V.setAttribute("src",R)}else{if(aa){V.async=true;V.addEventListener("load",T);var Z=document.getElementsByTagName("script");Z[0].parentNode.appendChild(V);V.setAttribute("src",R)}else{if(Y){V.async=true;V.addEventListener("load",T);var Z=document.getElementsByTagName("script");Z[0].parentNode.appendChild(V);V.setAttribute("href",R)}else{V.addEventListener("load",T);V.setAttribute("src",R)}}}return V}}function J(T){T=hotjs.getAbsPath(T,document.location.href);var V=P[T];if(!V){var S=L(T),R=f(T),Q=T.endsWith(".js"),W=T.endsWith(".css");if(S){V=new Video();V.setAttribute("src",T);V.load()}else{if(R){V=new Audio();V.setAttribute("src",T);V.load()}else{if(Q){V=document.createElement("script");V.async=1;V.setAttribute("src",T);var U=document.getElementsByTagName("script");U[0].parentNode.appendChild(V)}else{V=new Image();V.setAttribute("src",T)}}}P[T]=V}return V}var i=false;var C={};function y(R){i=R;if(R){for(var S in C){var Q=C[S];if(Q==="loop"||Q==="play"){c(S)}}}}function x(R,V){var U=((!window.plugins)||(!window.plugins.LowLatencyAudio)||(R.indexOf("http://")===0));if(U){return}else{if(!C[R]){var T="www/";var Q=R.substring(R.indexOf(T)+T.length);var S=window.plugins.LowLatencyAudio;if(V){S.preloadFX(R,Q)}else{S.preloadAudio(R,Q,1)}C[R]="loaded"}}}function v(R){if(Array.isArray(R)){for(var Q=0;Q<R.length;Q++){x(R[Q],false)}}else{x(R,false)}}function G(R){if(Array.isArray(R)){for(var Q=0;Q<R.length;Q++){x(R[Q],true)}}else{x(R,true)}}function D(R,U,Q){if(i){return}var T=((!window.plugins)||(!window.plugins.LowLatencyAudio)||(R.indexOf("http://")===0));if(T){J(R).play();C[R]="play"}else{if(!C[R]){x(R,U)}var S=window.plugins.LowLatencyAudio;if(Q){S.loop(R);C[R]="loop"}else{S.play(R);C[R]="play"}}}function c(Q){if(i){return}if(C[Q]){var S=((!window.plugins)||(!window.plugins.LowLatencyAudio)||(Q.indexOf("http://")===0));if(S){var R=J(Q);R.pause();R.currentTime=0}else{window.plugins.LowLatencyAudio.stop(Q)}C[Q]="stop"}}function q(Q){if(A!==null){console.log("warning: previous app not exit normally.")}A=Q;return this}function j(Q){if(A){if(typeof A.exit=="function"){A.exit()}if(typeof A.getRes=="function"){E(A.getRes())}A=null}if(w){console.log("loading app from js: "+Q)}t(Q,{ready:function(){if(A){if(typeof A.init=="function"){A.init()}}}});return this}window.resources={getLoadingGif:function(){return K},getXPng:function(){return H},get:J,load:t,unload:E,isReady:F,onReady:e,onLoading:g,onError:l,preloadMusic:v,preloadFX:G,playAudio:D,stopAudio:c,muteAudio:y,regApp:q,runAppFromJs:j,setDebug:function(Q){w=Q},getAll:function(){return P},getActiveApp:function(){return A}}})();var hotjs=hotjs||{};(function(){var a=hotjs.Vector;var f=(function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(i){window.setTimeout(i,1000/60)}})();var g=function(){hotjs.base(this);this.canvas=document.createElement("canvas");this.ctx=this.canvas.getContext("2d");this.canvas.width=480;this.canvas.height=320;this.rect=this.canvas.getBoundingClientRect();this.color="black";this.bgcolor="white";this.bgrepeat=false;this.bgimg=undefined;this.bgimgrect=undefined;this.fgrepeat=false;this.fgimg=undefined;this.fgimgrect=undefined;this.container=undefined;this.scenes=[];this.sceneIndex={};this.curScene=undefined;this.bFps=false;this.dtSum=0;this.frames=0;this.fps=60;this.maxFps=60;this.runningTime=0;this.runningTimeStr="0 : 00 : 00";this.infoPos=[40,40];this.dragItems=new hotjs.HashMap();this.touches=new hotjs.HashMap();this.mouseInView=[0,0,0];this.mouseInNode=[0,0,0];this.touch_accuracy=3;var j=this;var i=this.canvas;this.canvas.addEventListener("click",function(k){j.onClick(k);k.preventDefault()});this.canvas.addEventListener("mousedown",function(k){document.onmousemove=function(l){l=l||window.event;j.onMouseMove(l);k.preventDefault()};document.onmouseup=function(l){document.onmousemove=null;if(i.releaseCapture){i.releaseCapture()}j.onMouseUp(l);k.preventDefault()};if(i.setCapture){i.setCapture()}j.onMouseDown(k);k.preventDefault()});this.canvas.addEventListener("mousemove",function(k){j.onMouseMove(k);k.preventDefault()});this.canvas.addEventListener("touchstart",function(k){j.onTouchStart(k);k.preventDefault()});this.canvas.addEventListener("touchend",function(k){j.onTouchEnd(k);k.preventDefault()});this.canvas.addEventListener("touchcancel",function(k){j.onTouchEnd(k);k.preventDefault()});this.canvas.addEventListener("touchmove",function(k){j.onTouchMove(k);k.preventDefault()})};hotjs.inherit(g,hotjs.Class,{start:function(){var l=this;var m=Date.now();var k=1000/this.maxFps;var i=m+k;function j(){var q=Date.now();if(q>i){if(l.running){var r=(q-m)/1000;l.update(r);l.render()}m=q;i+=k}if(!l.stopping){f(j)}else{l.stopped=true}}this.stopping=false;this.running=true;j();return this},stop:function(){this.stopping=true;return this},setMaxFps:function(i){this.maxFps=Math.max(1,Math.min(i,60));return this},resume:function(i){if(i==undefined){i=true}this.running=i;return this},pause:function(){this.rusume(false);return this},setContainer:function(i){this.container=document.getElementById(i);if(!this.container){this.container=document.body}this.container.appendChild(this.canvas);this.canvas.unselectable="on";this.canvas.onselectstart=function(){return false};this.canvas.style.userSelect=this.canvas.style.MozUserSelect="none";return this},setSize:function(i,j){this.canvas.width=i;this.canvas.height=j;this.rect=this.canvas.getBoundingClientRect();return this},setBgColor:function(i){this.bgcolor=i;return this},setColor:function(i){this.color=i;return this},setBgImage:function(k,i,j){this.bgrepeat=k;this.bgimg=i;if(!j){this.bgimgrect=[0,0,i.width,i.height]}else{this.bgimgrect=[j[0],j[1],j[2],j[3]]}return this},setFgImage:function(k,i,j){this.fgrepeat=k;this.fgimg=i;if(!j){this.fgimgrect=[0,0,i.width,i.height]}else{this.fgimgrect=[j[0],j[1],j[2],j[3]]}return this},getSize:function(){return[this.canvas.width,this.canvas.height]},width:function(){return this.canvas.width},height:function(){return this.canvas.height},shift:function(i,j){if(!!this.curScene){this.curScene.move(-i,-j)}return this},zoom:function(j,i){if(!i){i=[this.width()/2,this.height()/2]}if(!!this.curScene){var k=this.curScene.posFromContainer(i);this.curScene.zoom(j,k)}return this},addNode:function(i,j){this.scenes.push(i);if(j!=undefined){this.sceneIndex[j]=i}i.setContainer(this);this.curScene=i;return this},switchScene:function(i){if(!!i){if(!!this.curScene){}this.curScene=i}return this},switchSceneById:function(j){var i=this.sceneIndex[j];if(!!i){this.switchScene(i)}return this},pushSceneById:function(i){this.sceneStack.push(this.curScene);this.switchSceneById(i);return this},popScene:function(){var i=this.sceneStack.pop();this.switchScene(i);return this},showFPS:function(i){if(i==undefined){i=(!this.bFps)}this.bFps=i;return this},update:function(q){for(var k=0;k<this.scenes.length;k++){this.scenes[k].update(q)}this.frames++;this.dtSum+=q;if(this.dtSum>1){this.rect=this.canvas.getBoundingClientRect();this.runningTime+=this.dtSum;if(this.bFps){var l=Math.floor(this.runningTime);var j=Math.floor(l/60);l%=60;if(l<10){l="0"+l}h=Math.floor(j/60);j%=60;if(j<10){j="0"+j}this.runningTimeStr=h+" : "+j+" : "+l}this.fps=Math.round(this.frames/this.dtSum);this.dtSum=0;this.frames=0}return this},render:function(){var k=this.ctx;k.save();if(!!this.bgimg){if(this.bgrepeat){k.fillStyle=k.createPattern(this.bgimg,"repeat");k.fillRect(0,0,this.canvas.width,this.canvas.height)}else{k.drawImage(this.bgimg,this.bgimgrect[0],this.bgimgrect[1],this.bgimgrect[2],this.bgimgrect[3],0,0,this.canvas.width,this.canvas.height)}}else{if(!!this.bgcolor){k.fillStyle=this.bgcolor;k.fillRect(0,0,this.canvas.width,this.canvas.height)}}for(var j=0;j<this.scenes.length;j++){this.scenes[j].render(k)}if(!!this.fgimg){if(this.fgrepeat){k.fillStyle=k.createPattern(this.fgimg,"repeat");k.fillRect(0,0,this.canvas.width,this.canvas.height)}else{k.drawImage(this.fgimg,this.fgimgrect[0],this.fgimgrect[1],this.fgimgrect[2],this.fgimgrect[3],0,0,this.canvas.width,this.canvas.height)}}this.draw(k);k.restore();return this},setInfoPos:function(i,j){this.infoPos=[i,j];return this},draw:function(k){if(this.bFps){k.save();k.strokeStyle=this.color;k.fillStyle=this.color;k.fillText(this.runningTimeStr,this.infoPos[0],this.infoPos[1]+20);k.fillText(this.fps+" fps: "+this.frames,this.infoPos[0],this.infoPos[1]+40);k.fillText("("+this.canvas.width+" x "+this.canvas.height+")",this.infoPos[0],this.infoPos[1]+60);var j="("+this.rect.width+" x "+this.rect.height+"): ("+this.rect.left+","+this.rect.top+") -> ("+this.rect.right+","+this.rect.bottom+")";k.fillText(j,this.infoPos[0],this.infoPos[1]+80);if(this.curScene&&this.curScene.scale){var i=this.curScene.scale;i=Math.round(i[0]*100)+"% x "+Math.round(i[1]*100)+"%";k.fillText(i,this.infoPos[0],this.infoPos[1]+100)}k.fillText(this.mouseInView[2]+": ("+this.mouseInView[0]+", "+this.mouseInView[1]+")",this.infoPos[0],this.infoPos[1]+120);k.fillText(this.mouseInNode[2]+": ("+this.mouseInNode[0]+", "+this.mouseInNode[1]+")",this.infoPos[0],this.infoPos[1]+140);k.strokeRect(0,0,this.canvas.width,this.canvas.height);k.restore()}},touchFromEvent:function(m){var j=this.canvas;var t=j.ownerDocument||j.document||document;var i=t.documentElement;var k=t.body;var q=i.scrollLeft||k.scrollLeft;var l=i.scrollTop||k.scrollTop;var r=m.identifier;if(m.identifier==undefined){r=0}return{id:r,x:Math.round(m.pageX-this.rect.left-q),y:Math.round(m.pageY-this.rect.top-l)}},click:function(i){var j=this.curScene;if(!!j){if(j.inRange([i.x,i.y])){return j.onClick(i)}}return false},onClick:function(i){return false},onMouseDown:function(k){var i=this.touchFromEvent(k);this.touches.put(i.id,[i.x,i.y]);this.mouseInView=[i.x,i.y,i.id];this.t0=[i.x,i.y];var j=this.curScene;if(!!j){if(j.inRange([i.x,i.y])){if(j.draggable){this.dragItems.put(i.id,j)}return j.onTouchStart(i)}}return false},onMouseUp:function(l){var i=this.touchFromEvent(l);this.touches.remove(i.id);this.mouseInView=[i.x,i.y,i.id];var k=[i.x-this.t0[0],i.y-this.t0[1]];if(hotjs.Vector.getLength(k)<=this.touch_accuracy){this.click(i)}var j=this.dragItems.get(i.id);if(!!j){this.dragItems.remove(i.id);return j.onTouchEnd(i)}var j=this.curScene;if(!!j){if(j.inRange([i.x,i.y])){return j.onTouchEnd(i)}}return false},onMouseMove:function(k){var i=this.touchFromEvent(k);this.mouseInView=[i.x,i.y,i.id];var j=this.dragItems.get(i.id);if(!!j){return j.onTouchMove(i)}var j=this.curScene;if(!!j){return j.onTouchMove(i)}return false},onTouchStart:function(k){this.touch_accuracy=10;for(var j=0;j<k.targetTouches.length;j++){this.onMouseDown(k.targetTouches[j])}},onTouchEnd:function(k){this.touch_accuracy=10;for(var j=0;j<k.changedTouches.length;j++){this.onMouseUp(k.changedTouches[j])}},onTouchMove:function(k){this.touch_accuracy=10;for(var j=0;j<k.targetTouches.length;j++){this.onMouseMove(k.targetTouches[j])}}});var e=0;var c=function(){hotjs.base(this);this.container=undefined;this.name="node_"+(e++);this.subnodes=undefined;this.index={};this.size=[40,40];this.color=undefined;this.bgcolor=undefined;this.img=undefined;this.imgrect=undefined;this.sprite=undefined;this.gridOn=false;this.imgOn=true;this.pos=[0,0];this.velocity=[0,0];this.rotation=undefined;this.scale=undefined;this.alpha=undefined;this.anims=[];this.accel=undefined;this.mass=1600;this.density=1;this.draggable=undefined;this.moveable=undefined;this.zoomable=undefined;this.rotateable=undefined;this.throwable=undefined;this.gesture=[0,0];this.dragging=false};hotjs.inherit(c,hotjs.Class,{setName:function(i){this.name=i;return this},getName:function(){return this.name},setPos:function(i,j){this.pos=[i,j];return this},setSize:function(i,j){this.size=[i,j];return this},getSize:function(){return this.size},posFromContainer:function(j){var i=j[0]-this.pos[0],k=j[1]-this.pos[1];if(!!this.scale){i/=this.scale[0];k/=this.scale[1]}return[Math.floor(i),Math.floor(k)]},posToContainer:function(j){var i=j[0],k=j[1];if(!!this.scale){i*=this.scale[0];k*=this.scale[1]}return[Math.floor(i+this.pos[0]),Math.floor(k+this.pos[1])]},inRange:function(k){var j=this.posFromContainer(k);var i=(j[0]>=0)&&(j[0]<this.size[0])&&(j[1]>=0)&&(j[1]<this.size[1]);return i},setDraggable:function(i,j){this.draggable=i||j;this.draggableX=i;this.draggableY=(j==undefined)?i:j;if(this.draggable){if(this.touches0==undefined){this.touches0=new hotjs.HashMap()}if(this.touches==undefined){this.touches=new hotjs.HashMap()}}return this},setMoveable:function(i,j){this.setDraggable(i,j);this.moveable=i||j;return this},setThrowable:function(i,j){this.setMoveable(i,j);this.throwable=i||j;this.throwableX=i;this.throwableY=(j==undefined)?i:j;return this},setZoomable:function(i){this.zoomable=i;if(i){if(this.touches0==undefined){this.touches0=new hotjs.HashMap()}if(this.touches==undefined){this.touches=new hotjs.HashMap()}if(this.scale==undefined){this.scale=[1,1]}}return this},setRotateable:function(i){if(i){if(this.touches0==undefined){this.touches0=new hotjs.HashMap()}if(this.touches==undefined){this.touches=new hotjs.HashMap()}if(this.rotation==undefined){this.rotation=0}}this.rotateable=i;return this},onClick:function(k){var q=this.posFromContainer([k.x,k.y]);var l={id:k.id,x:q[0],y:q[1]};this.container.mouseInNode=[l.x,l.y,l.id];if(!!this.subnodes){for(var j=this.subnodes.length-1;j>=0;j--){var m=this.subnodes[j];if(m.inRange(q)){return m.onClick(l)}}}},onTouchStart:function(k){if(!!this.touches0){var m={id:k.id,x:k.x,y:k.y,px:this.pos[0],py:this.pos[1]};if(this.zoomable){m.sx=this.scale[0];m.sy=this.scale[1]}if(this.rotateable){m.r=this.rotation}this.touches0.put(k.id,m);if(this.touches0.size()==1){this.id0=k.id}}this.gestureTime=Date.now();this.gesturePos=[k.x,k.y];this.gesture=[0,0];var r=this.posFromContainer([k.x,k.y]);var l={id:k.id,x:r[0],y:r[1]};this.container.mouseInNode=[l.x,l.y,l.id];if(!!this.subnodes){for(var j=this.subnodes.length-1;j>=0;j--){var q=this.subnodes[j];if((!!q.draggable)&&q.inRange(r)){this.dragItems.put(l.id,q);return q.onTouchStart(l)}}}if(!!this.draggable){this.dragging=true;this.setVelocity(0,0);return true}return false},fixPos:function(){},handleDragZoomRotate:function(B){if(!this.touches){return false}if(!this.touches0){return false}if(this.draggable){if(this.touches.size()==1){var v=this.touches0.get(this.id0);var m=this.touches.get(this.id0);if(this.draggableX){this.pos[0]=(m.x-v.x+v.px)}if(this.draggableY){this.pos[1]=(m.y-v.y+v.py)}this.fixPos()}}if(this.zoomable){if(this.touches.size()==2){var i=this.touches.keys();var x=this.touches0.get(i[0]);var z=this.touches0.get(i[1]);var k=a.getLength(a.sub([x.x,x.y],[z.x,z.y]));var r=this.touches.get(i[0]);var y=this.touches.get(i[1]);var j=a.getLength(a.sub([r.x,r.y],[y.x,y.y]));var v=this.touches0.get(this.id0);this.scale=[v.sx*j/k,v.sy*j/k];var w=[(x.x+z.x)/2,(x.y+z.y)/2];center_view=a.add([v.px,v.py],a.scale(w,[v.sx,v.sy]));this.pos=a.sub(center_view,a.scale(w,this.scale));var q=[(r.x+y.x)/2,(r.y+y.y)/2];var l=a.sub(q,w);this.pos=a.add(this.pos,l);this.fixPos()}}if(this.rotateable){}if(!!this.throwable){var A=this.getGesture();if(this.throwableX){this.velocity[0]=A[0]}if(this.throwableY){this.velocity[1]=A[1]}}},updateGesture:function(j){var i=Date.now();var k=(i-this.gestureTime)/1000;if(k>0){this.gesture=[(j.x-this.gesturePos[0])/k,(j.y-this.gesturePos[1])/k];if(k>0.3){this.gestureTime=i;this.gesturePos=[j.x,j.y]}}},getGesture:function(){return this.gesture},onTouchMove:function(k){if(!!this.touches){var m={id:k.id,x:k.x,y:k.y,px:this.pos[0],py:this.pos[1]};if(this.zoomable){m.sx=this.scale[0];m.sy=this.scale[1]}if(this.rotateable){m.r=this.rotation}this.touches.put(k.id,m)}this.updateGesture(k);if(!!this.dragging){this.handleDragZoomRotate(k);return true}var r=this.posFromContainer([k.x,k.y]);var l={id:k.id,x:r[0],y:r[1]};this.container.mouseInNode=[l.x,l.y,l.id];if(!!this.dragItems){var q=this.dragItems.get(k.id);if(!!q){return q.onTouchMove(l)}}if(!!this.subnodes){for(var j=this.subnodes.length-1;j>=0;j--){var q=this.subnodes[j];if(q.inRange(r)){return q.onTouchMove(l)}}}return false},onTouchEnd:function(i){if(!!this.touches){var l={id:i.id,x:i.x,y:i.y,px:this.pos[0],py:this.pos[1]};if(this.zoomable){l.sx=this.scale[0];l.sy=this.scale[1]}if(this.rotateable){l.r=this.rotation}this.touches.put(i.id,l)}this.updateGesture(i);if(this.dragging){this.dragging=false;if(!!this.moveable){this.handleDragZoomRotate(i)}else{var k=this.touches0.get(this.id0);this.pos=[k.px,k.py]}if(!!this.touches){this.touches.remove(i.id)}if(!!this.touches0){this.touches0.remove(i.id)}return true}var q=this.posFromContainer([i.x,i.y]);var j={id:i.id,x:q[0],y:q[1]};this.container.mouseInNode=[j.x,j.y,j.id];if(!!this.dragItems){var m=this.dragItems.get(i.id);if(!!m){this.dragItems.remove(j.id);return m.onTouchEnd(j)}}if(!!this.touches){this.touches.remove(i.id)}if(!!this.touches0){this.touches0.remove(i.id)}return false},width:function(){return this.size[0]},height:function(){return this.size[1]},setRotation:function(i){this.rotation=i;return this},setScale:function(j,i){this.scale=[j,i];return this},setVelocity:function(j,i){this.velocity=[j,i];return this},setMass:function(i){this.mass=i;return this},setDensity:function(i){this.density=i;this.mass=this.size[0]*this.size[1]*i;return this},setAccel:function(j,i){if(!this.velocity){this.velocity=[0,0]}this.accel=[j,i];return this},setColor:function(i){this.color=i;return this},setBgColor:function(i){this.bgcolor=i;return this},setAlpha:function(i){this.alpha=i;return this},showGrid:function(i){if(i==undefined){i=(!this.gridOn)}this.gridOn=i;return this},showImg:function(i){if(i==undefined){i=(!this.imgOn)}this.imgOn=i;return this},setImage:function(i,j){this.img=i;if(!j){this.imgrect=[0,0,i.width,i.height];if(!this.size){this.size=[i.width,i.height]}}else{this.imgrect=[j[0],j[1],j[2],j[3]];if(!this.size){this.size=[rect[2],rect[3]]}}return this},setSprite:function(i){this.sprite=i;return this},addNode:function(j,i){if(this.subnodes==undefined){this.subnodes=[]}if(this.index==undefined){this.index={}}if(this.dragItems==undefined){this.dragItems=new hotjs.HashMap()}if(this.touches==undefined){this.touches=new hotjs.HashMap()}j.setContainer(this);this.subnodes.push(j);if(typeof i=="string"){this.index[i]=j}return this},removeNode:function(k){if(!!this.subnodes){var j=this.subnodes.indexOf(k);if(j>=0){this.subnodes.splice(j,1);k.setContainer(undefined)}}return this},removeAll:function(){if(!!this.subnodes){while(this.subnodes.length>0){n=this.subnodes.pop();if("removeAll" in n){n.removeAll()}}for(id in this.index){delete this.index[id]}}return this},update:function(k){if(!!this.sprite){this.sprite.update(k)}if(!!this.subnodes){for(var j=0;j<this.subnodes.length;j++){this.subnodes[j].update(k)}}if(!!this.dragging){return this}if(this.velocity!==undefined){this.pos[0]+=this.velocity[0]*k;this.pos[1]+=this.velocity[1]*k}if(this.accel!==undefined){this.velocity[0]+=this.accel[0]*k;this.velocity[1]+=this.accel[1]*k}if(this.anims.length>0){for(var j=0;j<this.anims.length;j++){this.anims[j].update(k)}}return this},addAnim:function(i){this.anims.push(i);return this},removeAnim:function(i){this.anims.splice(this.anims.indexOf(i),1);return this},render:function(k){k.save();if(!this.rotation){k.translate(this.pos[0],this.pos[1])}else{k.translate(this.pos[0]+this.size[0]/2,this.pos[1]+this.size[1]/2);k.rotate(this.rotation*Math.PI/180);k.translate(-this.size[0]/2,-this.size[1]/2)}if(!!this.scale){k.scale(this.scale[0],this.scale[1])}if(!!this.alpha){k.globalAlpha=this.alpha}this.draw(k);if(!!this.subnodes){for(var j=0;j<this.subnodes.length;j++){this.subnodes[j].render(k)}}k.restore();return this},draw:function(i){i.save();if(this.imgOn){if(!!this.sprite){this.sprite.render(i,this.size[0],this.size[1])}else{if(!!this.img){if(!!this.imgrect){i.drawImage(this.img,this.imgrect[0],this.imgrect[1],this.imgrect[2],this.imgrect[3],0,0,this.size[0],this.size[1])}else{i.drawImage(this.img,0,0,this.size[0],this.size[1])}}}}if(this.gridOn){i.strokeRect(0,0,this.size[0],this.size[1])}i.restore();return this}});var b=function(){hotjs.base(this);this.bgrepeat=false;this.bgimg=undefined;this.bgimgrect=undefined;this.area=undefined;this.arearepeat=false;this.areaimg=undefined;this.areaimgrect=undefined;this.scale=[1,1]};hotjs.inherit(b,c,{setView:function(i){this.setContainer(i);this.zoom();this.setDraggable(true);this.setMoveable(true);return this},setBgImage:function(k,i,j){this.bgrepeat=k;this.bgimg=i;if(!j){this.bgimgrect=[0,0,i.width,i.height]}else{this.bgimgrect=[j[0],j[1],j[2],j[3]]}return this},setAreaImage:function(k,i,j){this.arearepeat=k;this.areaimg=i;if(!j){this.areaimgrect=[0,0,i.width,i.height]}else{this.areaimgrect=[j[0],j[1],j[2],j[3]]}return this},setArea:function(i,l,j,k){this.area={l:i,t:l,w:j,h:k,r:(i+j),b:(l+k)};return this},getArea:function(){if(!this.area){return{l:0,t:0,w:this.size[0],h:this.size[1],r:this.size[0],b:this.size[1]}}return this.area},onTouchMove:function(j){var i=b.supClass.onTouchMove.call(this,j);return i},onTouchEnd:function(j){var i=b.supClass.onTouchEnd.call(this,j);this.fixPos();return i},fixPos:function(){var i=hotjs.Vector;var k=this.container.width(),m=this.container.height();var t=k/this.size[0],r=m/this.size[1];var l=Math.min(t,r);if(this.scale[0]<l||this.scale[1]<l){this.scale[0]=l;this.scale[1]=l}if(this.pos[0]>0){this.pos[0]=0}if(this.pos[1]>0){this.pos[1]=0}var q=(!this.scale)?i.add(this.size,this.pos):i.add(i.scale(this.size,this.scale),this.pos);var j=i.sub(this.container.getSize(),q);if(j[0]>0){this.pos[0]+=j[0]}if(j[1]>0){this.pos[1]+=j[1]}return this},move:function(i,j){this.pos[0]+=i;this.pos[1]+=j;this.fixPos();return this},zoom:function(q,m){var k=this.container.getSize();var i=[k[0]/this.size[0],k[1]/this.size[1]];var l=Math.max(i[0],i[1]);if(q=="none"){this.scale=[1,1];this.pos=[(k[0]-this.size[0])/2,(k[1]-this.size[1])/2]}else{if(q=="stretch"){this.scale=i;this.pos=[0,0]}else{if(q>0){if(!this.scale){this.scale=[1,1]}var j=[l/this.scale[0],l/this.scale[1]];q=Math.max(j[0],Math.max(j[1],q));this.pos=[this.pos[0]-m[0]*this.scale[0]*(q-1),this.pos[1]-m[1]*this.scale[1]*(q-1)];this.scale=a.mul(this.scale,q);if(this.scale[0]<l||this.scale[1]<l){this.scale=[l,l]}}else{this.scale=[l,l];this.pos=[(k[0]-this.size[0]*l)/2,(k[1]-this.size[1]*l)/2]}}}this.fixPos();return this},play:function(){this.playing=true;return this},stop:function(){this.playing=false;return this},draw:function(q){q.save();var k=this.getArea();if(this.imgOn){if(!!this.bgimg){if(this.bgrepeat){q.fillStyle=q.createPattern(this.bgimg,"repeat");q.fillRect(0,0,this.size[0],this.size[1])}else{q.drawImage(this.bgimg,this.bgimgrect[0],this.bgimgrect[1],this.bgimgrect[2],this.bgimgrect[3],0,0,this.size[0],this.size[1])}}else{if(!!this.bgcolor){q.fillStyle=this.bgcolor;q.fillRect(0,0,this.size[0],this.size[1])}}if(!!this.areaimg){if(this.arearepeat){q.fillStyle=q.createPattern(this.areaimg,"repeat");q.fillRect(k.l,k.t,k.w,k.h)}else{q.drawImage(this.areaimg,this.areaimgrect[0],this.areaimgrect[1],this.areaimgrect[2],this.areaimgrect[3],k.l,k.t,k.w,k.h)}}}if(this.gridOn){q.strokeStyle=this.color;q.lineWidth=0.5;var l=40,j=40;q.beginPath();for(var i=0;i<=this.size[0];i+=l){q.moveTo(i,0);q.lineTo(i,this.size[1])}for(var m=0;m<=this.size[1];m+=j){q.moveTo(0,m);q.lineTo(this.size[0],m)}q.stroke();q.lineWidth=1;q.beginPath();q.arc((k.l+k.r)/2,(k.t+k.b)/2,10,0,Math.PI*2);q.arc(this.size[0]/2,this.size[1]/2,20,0,Math.PI*2);q.stroke();q.beginPath();q.strokeRect(k.l,k.t,k.w,k.h);q.strokeRect(0,0,this.size[0],this.size[1]);q.stroke()}q.restore();return this},addItem:function(){}});hotjs.View=g;hotjs.Node=c;hotjs.Scene=b})();var hotjs=hotjs||{};(function(){function c(i,q,j,l,m,g,k){this.pos=q;this.size=j;this.speed=typeof l==="number"?l:0;this.frames=m;this._index=0;this.url=i;this.dir=g||"horizontal";this.once=k}c.prototype={update:function(g){this._index+=this.speed*g},render:function(t,q,j){var g;if(this.speed>0){var l=this.frames.length;var r=Math.floor(this._index);g=this.frames[r%l];if(this.once&&r>=l){this.done=true;return}}else{g=0}var m=this.pos[0];var k=this.pos[1];if(this.dir=="vertical"){k+=g*this.size[1]}else{m+=g*this.size[0]}if(!q){q=this.size[0]}if(!j){j=this.size[1]}var i=resources.get(this.url);t.drawImage(i,m,k,this.size[0],this.size[1],0,0,q,j)}};var f=function(i,g){hotjs.base(this);this.sheet=sprite_cache[hotjs.getFileName(i)];this.anim=(this.sheet.anims)[g];this.index=0;this.counter=0};hotjs.inherit(f,hotjs.Class,{update:function(g){var i=this.anim[this.index];this.counter++;if(this.counter>=i[1]){this.counter=0;this.index++;if(this.index>=this.anim.length){this.index=0}}},render:function(M,v,H){M.save();M.translate(v*0.5,H);var N=this.sheet.modules;var z=this.sheet.images;var A=this.sheet.frames;var J=this.anim[this.index];var L=J[0],l=J[2],j=J[3],q=J[4];var k=A[L];M.translate(l,j);switch(q){case 0:M.scale(1,1);break;case 2:M.scale(-1,1);break;case 3:M.scale(1,-1);break;case 4:M.scale(-1,-1);break}for(var G=0;G<k.length;G++){var F=k[G];var O=F[0],D=F[1],C=F[2],K=F[3];var P=N[O];if(P[0]=="MD_IMAGE"){var B=P[1],t=P[2],r=P[3],v=P[4],H=P[5];var Q=z[B];var g=Q[2],E=Q[1];var I=resources.get(g);M.save();M.translate(D+v/2,C+H/2);switch(K){case 0:M.scale(1.01,1.01);break;case 2:M.scale(-1.01,1.01);break;case 3:M.scale(1.01,-1.01);break;case 4:M.scale(-1.01,-1.01);break}M.drawImage(I,t,r,v,H,-v/2,-H/2,v,H);M.restore()}}M.restore()}});var b=function(g){hotjs.base(this);this.par=g;this.frame=0;this.life=0;this.spin=0;this.spin_delta=0};hotjs.inherit(b,hotjs.Node,{init:function(){var g=hotjs.Random.Integer;var q=hotjs.Random.Float;var r=this.par;var w=r.mode.v;if(r.res.endsWith(".png")){this.setImage(resources.get(r.resurl))}else{if(r.res.endsWith(".sprite.js")){this.setSprite(new f(r.resurl,"xxx"))}else{return this}}this.life=g(r.lifeMin,r.lifeMax);this.pos=[r.x,r.y];switch(r.mode.id){case 0:break;case 31:this.pos[0]+=q(w[0],w[2]);this.pos[1]+=q(w[1],w[3]);break;case 32:var k=q(w[1],w[0]);var j=q(w[2],w[3]);this.pos[0]+=k*Math.cos(j*Math.PI/180);this.pos[1]+=k*Math.sin(j*Math.PI/180);break}var t=r.filters;for(var l=0;l<t.length;l++){var m=t[l];var w=m.v;switch(m.type){case"rotate":if(w[1]>0){this.rotation=q(0,1)*360}else{this.rotation=w[0]}this.spin=w[2];this.spin_delta=(w[3]-w[2])/this.life;break;case"scale":var x=q(w[0],w[1]);this.scale=[x,x];break;case"move":break;case"color":break;case"h3g":break}}return this},update:function(g){b.supClass.update.call(this,g);this.frame++;this.rotation+=this.spin;this.spin+=this.spin_delta}});var e=function(g){hotjs.base(this);this.par=g;this.par.maxPtsCount=Math.min(this.par.maxPtsCount,16);this.subnodes=[];this.frame=0};hotjs.inherit(e,hotjs.Node,{init:function(){},destroy:function(){this.subnodes.length=0},update:function(l){var g=hotjs.Random.Integer;var k=this.par;var q=this.subnodes;for(var j=q.length-1;j>=0;j--){var m=q[j];if(m.frame<m.life){m.update(l)}else{q.splice(j,1);delete m}}if(this.frame>=k.delay&&this.frame<k.life){var r=g(k.createMin,k.createMax);for(var j=0;j<r;j++){if(q.length>=k.maxPtsCount){break}var m=new b(k).init();this.addNode(m)}}this.frame++;if(this.frame>=25){this.frame=0}}});var a=function(g){hotjs.base(this);var l=pst_cache[hotjs.getFileName(g)];var k=l.launchers;for(var j=0;j<k.length;j++){this.addNode(new e(k[j]))}};hotjs.inherit(a,hotjs.Node,{});hotjs.Sprite=c;hotjs.Animat=f;hotjs.Particle=b;hotjs.ParticleSet=e;hotjs.ParticleSystem=a})();hotjs.Anim=hotjs.Anim||{};(function(){var f=function(r,t){hotjs.base(this);this.who=r;this.param={loop:false,duration:1};for(var q in t){this.param[q]=t[q]}this.dtSum=0};hotjs.inherit(f,hotjs.Class,{init:function(){},step:function(q){},restore:function(){},play:function(){this.init();this.who.addAnim(this);return this},update:function(t){this.dtSum+=t;var v=(this.dtSum>=this.param.duration)&&(!this.loop);var q=this.step(t);var r=this.param.step;if(typeof r=="function"){r(this.who,t)}if(v||q){this.who.removeAnim(this);var r=this.param.done;if(typeof r=="function"){r(this.who)}}}});var b=function(q,r){hotjs.base(this,q,r)};hotjs.inherit(b,f,{init:function(){var q=this.param;this.from=[this.who.pos[0],this.who.pos[1]];this.to=[q.to[0],q.to[1]]},step:function(q){this.who.pos=[this.from[0]+(this.to[0]-this.from[0])*this.dtSum/this.param.duration,this.from[1]+(this.to[1]-this.from[1])*this.dtSum/this.param.duration];if(this.dtSum>=this.param.duration){this.who.pos=this.to}return false},restore:function(q){this.who.pos=this.from}});var k=function(q,r){hotjs.base(this,q,r)};hotjs.inherit(k,f,{init:function(){var q=this.param;this.from=[this.who.pos[0],this.who.pos[1]];this.to=[q.to[0],q.to[1]]},step:function(r){var q=Math.pow(this.dtSum/this.param.duration,2);this.who.pos=[this.from[0]+(this.to[0]-this.from[0])*q,this.from[1]+(this.to[1]-this.from[1])*q];if(this.dtSum>=this.param.duration){this.who.pos=this.to}return false},restore:function(q){this.who.pos=this.from}});var g=function(q,r){hotjs.base(this,q,r)};hotjs.inherit(g,f,{init:function(){if(!this.who.velocity){this.who.rotation=[0,0]}this.from=this.who.velocity},step:function(r){var q=Math.cos((this.dtSum/this.param.duration)*(Math.PI/180));this.who.velocity=[this.from[0]*q,this.from[1]*q];if(this.dtSum>=this.param.duration){this.who.velocity=[0,0]}},restore:function(){this.who.velocity=this.from}});var c=function(q,r){hotjs.base(this,q,r)};hotjs.inherit(c,f,{init:function(){if(!this.who.rotation){this.who.rotation=0}this.from=this.who.rotation;this.inc=this.param.spin},step:function(q){this.who.rotation+=this.inc*q},restore:function(){this.who.rotation=this.from}});var i=function(q,r){hotjs.base(this,q,r)};hotjs.inherit(i,f,{init:function(){this.from=this.who.scale;this.to=param.to},step:function(q){this.who.scale=[this.from[0]+(this.to[0]-this.from[0])*this.dtSum/this.param.duration,this.from[1]+(this.to[1]-this.from[1])*this.dtSum/this.param.duration];if(this.dtSum>=this.param.duration){this.who.scale=this.to}},restore:function(){this.who.scale=this.from}});var a=function(q,r){hotjs.base(this,q,r)};hotjs.inherit(a,f,{init:function(){var q=this.param;this.from=this.who.scale;this.mid=(q.range[1]+q.range[0])/2;this.delta=(q.range[1]-q.range[0])/2},step:function(r){var q=this.mid+this.delta*Math.sin(this.dtSum/this.param.freq*Math.PI);this.who.scale=[q,q];return false},restore:function(){this.who.scale=this.from}});var j=function(q,r){hotjs.base(this,q,r)};hotjs.inherit(j,f,{init:function(){this.from=this.who.alpha;this.to=this.param.to},step:function(q){this.who.alpha=this.from+(this.to-this.from)*this.dtSum/this.param.duration;if(this.dtSum>=this.param.duration){this.who.alpha=this.to}},restore:function(){this.who.alpha=this.from}});var l=function(q,r){hotjs.base(this,q,r)};hotjs.inherit(l,f,{init:function(){var q=this.param;this.from=this.who.alpha;this.mid=(q.range[0]+q.range[1])/2;this.delta=(q.range[1]-q.range[0])/2},step:function(q){this.who.alpha=this.mid+this.delta*Math.sin(this.dtSum/this.param.freq*Math.PI);return false},restore:function(){this.who.alpha=this.from}});var e=function(t,r,v){var q=hotjs.Anim[r];if(typeof q!="function"){console.log(q+" not exists, using default.");q=f}return new q(t,v)};var m=function(r,q){hotjs.Anim[r]=q;return this};hotjs.Anim={register:m,create:e,MoveTo:b,StickTo:k,SlowDown:g,RotateBy:c,ScaleTo:i,ScaleLoop:a,FadeTo:j,FadeLoop:l}})();hotjs=hotjs||{};hotjs.Physics=hotjs.Physics||{};(function(){var e={g:9.8,RESTITUTION_V:0.8,RESTITUTION_H:0.95,AIR_RESISTANCE:0.2,AIR_DENSITY:0.01293,HYDROGEN_DENSITY:0.0008948,WOOD_DENSITY:0.5,WATER_DENSITY:1,IRON_DENSITY:7.8,METER:100};var f={velocityAfterCollision:function(i,k,g,j){return((i-g)*k+2*g*j)/(i+g)},airResistance:function(g,i,j){return e.AIR_RESISTANCE*e.AIR_DENSITY*g*i*j*j},airFlotage:function(g,i){return(g*g*i*e.AIR_FLOTAGE)}};var b=function(){hotjs.base(this);this.restitution=0.95};hotjs.inherit(b,hotjs.Node,{setRestitution:function(g){g=Math.min(1,Math.max(0,g));this.restitution=g;return this},getRestitution:function(){return this.restitution},collide:function(g){return this}});var c=function(){hotjs.base(this)};hotjs.inherit(c,b,{collide:function(J){var i=hotjs.Vector;var z=f.velocityAfterCollision;var I=this.size[0]/2,t=this.size[1]/2;var H=J.size[0]/2,q=J.size[1]/2;var C=[this.pos[0]+I,this.pos[1]+t];var B=[J.pos[0]+H,J.pos[1]+q];var G=(I+t)/2;var F=(H+q)/2;var m=i.sub(C,B);var v=this.getRestitution()*J.getRestitution();var r=Math.sqrt(m[0]*m[0]+m[1]*m[1]);if(r>G+F){return false}if(r<G+F){var A=1-r/(G+F);var g=i.mul(m,A);this.pos=i.add(this.pos,g);J.pos=i.sub(J.pos,g)}var K=[m[1],-m[0]];var k=i.project(this.velocity,m);var l=i.project(this.velocity,K);var j=i.project(J.velocity,m);var y=i.project(J.velocity,K);var x=z(this.mass,k[0],J.mass,j[0])*v;var w=z(this.mass,k[1],J.mass,j[1])*v;var E=z(J.mass,j[0],this.mass,k[0])*v;var D=z(J.mass,j[1],this.mass,k[1])*v;this.velocity=i.add(l,[x,w]);J.velocity=i.add(y,[E,D]);return true}});var a=function(){hotjs.base(this);this.restitution=0.6;this.gravity=e.g;this.resistance=1/2;this.meter=200};hotjs.inherit(a,hotjs.Scene,{setRestitution:function(g){g=Math.min(1,Math.max(0,g));this.restitution=g;return this},getRestitution:function(){return this.restitution},setMeter:function(g){this.meter=g;return this},setGravity:function(g){this.gravity=g*e.g;return this},getGravity:function(){return this.gravity},setResistance:function(g){this.resistance=g;return this},getResistance:function(){return this.resistance},checkBorderCollision:function(l){var y=this.getArea();for(var m=this.subnodes.length-1;m>=0;m--){var w=this.subnodes[m];var A=w.pos[0],x=w.pos[1];var k=w.size[0],j=w.size[1];var v=w.velocity[0],r=w.velocity[1];var z=((A<=y.l)&&(v<=0))||((A+k>=y.r)&&(v>=0));var t=((x<=y.t)&&(r<=0))||((x+j>=y.b)&&(r>=0));var g=v*(-this.resistance);var B=r*(-this.resistance);var q=this.restitution*w.getRestitution();if(z){v*=(-q);r*=(0.9+q*0.1)}if(t){r*=(-q);v*=(0.9+q*0.1)}else{B+=(1-e.AIR_DENSITY/w.density)*(this.gravity*this.meter)}w.velocity=[v,r];w.accel=[g,B]}return this},validatePos:function(){var j=this.getArea();for(var k=this.subnodes.length-1;k>=0;k--){var g=this.subnodes[k];px=Math.max(j.l,Math.min(j.r-g.size[0],g.pos[0]));py=Math.max(j.t,Math.min(j.b-g.size[1],g.pos[1]));g.pos=[Math.round(px),Math.round(py)]}return this},update:function(q){if(!!this.subnodes){for(var m=this.subnodes.length-1;m>=0;m--){var g=this.subnodes[m];g.update(q)}for(var m=this.subnodes.length-1;m>=1;m--){var g=this.subnodes[m];for(var l=m-1;l>=0;l--){var k=this.subnodes[l];g.collide(k)}}this.checkBorderCollision(q);this.validatePos()}return this}});hotjs.Physics.Constant=e;hotjs.Physics.Formula=f;hotjs.Physics.Node=b;hotjs.Physics.Scene=a;hotjs.Physics.Ball=c})();hotjs=hotjs||{};hotjs.Social=hotjs.Social||{};(function(){var z=function(){this.settings={url:"http://msghub.hotjs.net/api",cache:false,data:{},processData:true,type:"GET",async:false,timeout:10000,dataType:"html",crossDomain:false,context:document.body,statusCode:{403:function(){console.log("access denied.")},404:function(){console.log("url not found.")},405:function(){console.log("method not allowed.")},500:function(){console.log("server error")}}};this.msgMax=100;this.msgList=[];this.urls={}};z.prototype={config:function(P){if(P.msgMax!=undefined){this.msgMax=P.msgMax;delete P.msgMax}for(var O in P){this.settings[O]=P[O]}},configAPI:function(P){if(typeof P=="string"){this.urls._default_=P}else{if(typeof P=="object"){for(var O in P){this.urls[O]=P[O]}}}this.settings.url=this.urls._default_;return true},loadAPI:function(P,S,O){var V=this.requestMsg({module:S,version:O},P,{type:"GET"});if(!V){return false}if(!Array.isArray(V.list)){return false}var U=V.base;if(U.indexOf("://")<0){U=P.substring(0,P.lastIndexOf("/")+1)+U}for(var R=0;R<V.list.length;R++){var T=V.list[R];var Q=(T.url.indexOf("://")>-1)?T.url:(U+T.url);Q=Q.replace("/./","/");this.urls[T.api]=Q}return true},requestMsg:function(T,P,O){var U={};for(var Q in this.settings){U[Q]=this.settings[Q]}if(!!O){for(var Q in O){U[Q]=O[Q]}}if(!!T){U.data=T}if(!!P){U.url=P}U.async=false;var R=this;var S=false;$.ajax(U).done(function(W,X,V){console.log(W);W=JSON.parse(W);S=W}).fail(function(V,X,W){R.onMsgFail(V,X,W)}).complete(function(W,X,V){R.onMsgComplete(W,X,V)});return S},postMsg:function(S,P,O){var T={};for(var Q in this.settings){T[Q]=this.settings[Q]}if(!!O){for(var Q in O){T[Q]=O[Q]}}if(!!S){T.data=S}if(!!P){T.url=P}T.async=true;var R=this;$.ajax(T).done(function(V,W,U){console.log(V);V=JSON.parse(V);R.onMsgComing(V,W,U)}).fail(function(U,W,V){R.onMsgFail(U,W,V)}).complete(function(V,W,U){R.onMsgComplete(V,W,U)});return true},onMsgFail:function(O,Q,P){console.log("ajax fail");console.log(O,Q,P)},onMsgComplete:function(P,Q,O){},onMsgComing:function(Q,R,P){if(Array.isArray(Q)){for(var O=0;O<Q.length;O++){this.onMsgParse(Q[O])}}else{this.onMsgParse(Q)}},onMsgParse:function(O){},callAPI:function(P,R){var O=this.urls[P];if(!O){O=this.urls._default_}var Q=this.requestMsg({api:P,param:JSON.stringify(R)},O);if(typeof Q=="object"){return Q}return false},hello:function v(){var O=this.callAPI(arguments.callee.name,{name:"hotjs"});return(!!O)?O.name:false}};var g=function(){hotjs.base(this);this.username="";this.password="";this.app="hotjs";this.version=hotjs.version;this.session="";this.profile={};this.status={};this.tag=[];this.friends=[];this.blocks=[];this.hb_interval=5000};hotjs.inherit(g,z,{registerAccount:function w(O,R,P,Q,T){var S=this.callAPI(arguments.callee.name,{username:O,password:R,fullname:P,email:Q,cellphone:T});return(!!S)?S.done:false},deleteAccount:function G(){var O=this.callAPI(arguments.callee.name,{username:u,password:p});return(!!O)?O.done:false},login:function D(P,R,T,O,U){var S=this.callAPI(arguments.callee.name,{username:P,password:R,app:T,version:O});if((!!S)&&S.done){this.session=S.sid;this.username=P;this.password=R;this.app=T;this.version=O;if(!!U){this.hb_interval=U}var Q="u"+this.session;window[Q]=this;this.heartbeat();return true}return false},heartbeat:function K(){if(!!this.session){var O=arguments.callee.name;var R={sid:this.session,test1:[2,3,"str"],test2:{x:1,y:2}};this.postMsg({api:O,param:JSON.stringify(R)},this.urls[O]);var Q="u"+this.session;var P="window."+Q+".heartbeat()";this.hb_timer=window.setTimeout(P,this.hb_interval)}return true},logout:function M(){if(!!this.hb_timer){clearTimeout(this.hb_tiemr);var O="u"+this.session;delete window[O]}var P=this.callAPI(arguments.callee.name,{sid:this.session});this.session="";return(!!P)?P.done:false},changePassword:function J(O,P,Q){var R=this.callAPI(arguments.callee.name,{username:O,oldpwd:P,newpwd:Q});return(!!R)?R.done:false},updateProfile:function t(O){var P=this.callAPI(arguments.callee.name,{sid:this.session,profile:O});return(!!P)?P.done:false},getProfile:function N(){var O=this.callAPI(arguments.callee.name,{sid:this.session});return((!!O)&&O.done)?O.profile:false},queryProfile:function E(O){var P=this.callAPI(arguments.callee.name,{sid:this.session,user:O});return((!!P)&&P.done)?P.profile:false},listFriend:function j(){var P=this.callAPI(arguments.callee.name,{sid:this.session});if((!!P)&&P.done&&Array.isArray(P.user)){this.friends.length=0;for(var O=0;O<P.user.length;O++){this.friends.push(P.user[O].username)}return P.user}return false},addFriend:function i(Q,O){if(this.friends.indexOf(Q)>-1){return false}var P=this.callAPI(arguments.callee.name,{sid:this.session,username:Q,textmsg:O});if((!!P)&&P.done){this.friends.push(Q);return true}return false},confirmAddFriend:function m(P){if(this.friends.indexOf(P)>-1){return false}var O=this.callAPI(arguments.callee.name,{sid:this.session,username:P});if((!!O)&&O.done){this.friends.push(P);return true}return false},removeFriend:function B(Q){if(this.friends.indexOf(Q)==-1){return false}var O=this.callAPI(arguments.callee.name,{sid:this.session,username:Q});if((!!O)&&O.done){var P=this.friends.indexOf(Q);if(P>-1){this.friends.splice(P,1);return true}}return false},listBlock:function r(){var P=this.callAPI(arguments.callee.name,{sid:this.session});if((!!P)&&P.done&&Array.isArray(P.user)){this.blocks.length=0;for(var O=0;O<P.user.length;O++){this.blocks.push(P.user[O].username)}return P.user}return false},block:function x(O){if(this.friends.indexOf(O)>-1){return false}var P=this.callAPI(arguments.callee.name,{sid:this.session,username:O});if((!!P)&&P.done){this.blocks.push(O);return true}return false},unblock:function q(O){if(this.friends.indexOf(O)==-1){return false}var P=this.callAPI(arguments.callee.name,{sid:this.session,username:O});if((!!P)&&P.done){var Q=this.friends.indexOf(O);if(Q>-1){this.blocks.splice(Q,1);return true}}return false},setTag:function I(P){var Q=this.callAPI(arguments.callee.name,{sid:this.session,tag:P});if((!!Q)&&Q.done){this.tag.length=0;for(var O=0;O<P.length;O++){this.tag.push(P[O])}return true}return false},getTag:function C(){var Q=this.callAPI(arguments.callee.name,{sid:this.session});if((!!Q)&&Q.done){var P=Q.tag;this.tag.length=0;for(var O=0;O<P.length;O++){this.tag.push(P[O])}return true}return false},updateStatus:function c(P){var Q=this.callAPI(arguments.callee.name,{sid:this.session,status:P});if((!!Q)&&Q.done){for(var O in P){this.status[O]=P[O]}return true}return false},queryPresence:function H(P){var O=this.callAPI(arguments.callee.name,{sid:this.session,user:P});return((!!O)&&O.done)?O.presence:false},searchUser:function f(O,Q){var P=this.callAPI(arguments.callee.name,{sid:this.session,tag:O,distance:Q});return((!!P)&&P.done)?P.user:false},searchUserComplex:function F(O){var P=this.callAPI(arguments.callee.name,{sid:this.session,filter:O});return((!!P)&&P.done)?P.user:false},inviteJoinGroup:function e(O,P){var Q=this.callAPI(arguments.callee.name,{sid:this.session,name:O,group:P});return((!!Q)&&Q.done)?true:false},quitGroup:function y(O){var P=this.callAPI(arguments.callee.name,{sid:this.session,group:O});return((!!P)&&P.done)?true:false},chat:function L(O,P){var Q=this.callAPI(arguments.callee.name,{sid:this.session,group:P,what:O});return((!!Q)&&Q.done)?true:false},findRoom:function A(O){var P=this.callAPI(arguments.callee.name,{sid:this.session,name:O});return((!!P)&&P.done)?P.room:false},enterRoom:function l(O,P){var Q=this.callAPI(arguments.callee.name,{sid:this.session,name:O,password:P});return((!!Q)&&Q.done)?Q.name:false},leaveRoom:function a(O){var P=this.callAPI(arguments.callee.name,{sid:this.session,name:O});return((!!P)&&P.done)?true:false},say:function b(O){var P=this.callAPI(arguments.callee.name,{sid:this.session,what:O});return((!!P)&&P.done)?true:false},sms:function k(O,P){var Q=this.callAPI(arguments.callee.name,{sid:this.session,name:O,what:P});return((!!Q)&&Q.done)?true:false}});hotjs.Social.AjaxClient=z;hotjs.Social.User=g})();hotjs=hotjs||{};hotjs.Util=hotjs.Util||{};(function(){var b=null;hotjs.Util={getDeviceInfo:function(f){if(b!==null&&typeof f==="undefined"){return b}var k=null;var m=false;var g=typeof CanvasRenderingContext2D!=="undefined";var e=false;var j=false;var c=false;var l=(/chrome/i.test(f))?true:false;var f=f||navigator.userAgent;var i=0;if(/android/i.test(f)){e=true;k=f.toString().match(/android ([0-9]\.[0-9])\.?([0-9]?)/i);if(k&&k[1]){i=(parseFloat(k[1])+(k[2]?k[2]*0.01:0)).toFixed(2)}}else{if(/(iphone|ipad|ipod)/i.test(f)){j=true;k=f.toString().match(/([0-9]_[0-9])/i);if(k&&k[1]){i=parseFloat(k[1].replace(/_/,"."))}}else{m=true;if(/(MSIE)/i.test(f)){c=true;k=f.toString().match(/MSIE ([0-9])/i);if(k&&k[1]){i=parseInt(k[1],10)}}}}b={supportCanvas:g,desktop:m,android:e?i:false,ios:j?i:false,ie:c?i:false,chrome:l};return b},getBoundaryRect:function(e){var l=e[0][0];var j=e[0][0];var k=e[0][1];var g=e[0][1];for(var f=1,c=e.length;f<c;f++){l=Math.min(l,e[f][0]);j=Math.max(j,e[f][0]);k=Math.min(k,e[f][1]);g=Math.max(g,e[f][1])}return{left:l,right:j,top:k,bottom:g}},getRectPoints:function(c){return[[c.left,c.top],[c.right,c.top],[c.right,c.bottom],[c.left,c.bottom]]},cloneObject:function(c){var f={};for(var e in c){f[e]=c[e]}return f},addEventListener:function(e,g,f,c){if("addEventListener" in e){e.addEventListener(g,f,c)}else{e.attachEvent("on"+g,f,c)}},removeEventListener:function(e,g,f,c){if("removeEventListener" in e){e.removeEventListener(g,f,c)}else{e.detachEvent("on"+g,f,c)}},stopEventDefault:function(c){c=c||window.event;if("preventDefault" in c){c.preventDefault()}c.returnValue=false},getClientRect:function(f){var k=f.ownerDocument||f.document||document;var c=k.documentElement;var i=k.body;var g={};if("getBoundingClientRect" in f){var e=f.getBoundingClientRect();g.left=e.left;g.left+=c.scrollLeft||i.scrollLeft;g.top=e.top;g.top+=c.scrollTop||i.scrollTop;g.width=e.width;g.height=e.height;g.right=e.right;g.right+=c.scrollLeft||i.scrollLeft;g.bottom=e.bottom;g.bottom+=c.scrollTop||i.scrollTop}else{g.left=0;g.top=0;g.width=f.offsetWidth;g.height=f.offsetHeight;for(var j=f;j;j=j.offsetParent){g.left+=j.offsetLeft;g.top+=j.offsetTop}for(var j=f.parentNode;j;j=j.parentNode){if(j.tagName==="BODY"){break}if(j.tagName==="TR"){g.top+=2}g.left-=j.scrollLeft;g.top-=j.scrollTop}g.right=g.left+g.width;g.bottom=g.top+g.height}return g}};if(hotjs.Util.getDeviceInfo().ios){window.addEventListener("load",function(){setTimeout(function(){document.body.scrollTop=0},300)})}if(!Function.prototype.bind){Function.prototype.bind=function(c){if(typeof this!=="function"){throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable")}var i=Array.prototype.slice.call(arguments,1),g=this,e=function(){},f=function(){return g.apply(this instanceof e?this:c,i.concat(Array.prototype.slice.call(arguments)))};e.prototype=this.prototype;f.prototype=new e();return f}}var a=function(){hotjs.base(this);this.nMin=1;this.nMax=500;this.loopBench=false;this.fpsData=[];this.dtSumB=0;this.nCur=this.nMax;this.marginFormula=40;this.formula=false};hotjs.inherit(a,hotjs.View,{setBenchmarkRange:function(e,c){this.nMin=Math.min(e,c);this.nMax=Math.max(e,c);this.nCur=this.nMax;return this},showFormula:function(c){if(c==undefined){c=(!this.formula)}this.formula=c;return this},benchFPS:function(f,c,e){this.nMin=f;this.nMax=c;this.fpsData=[];this.dtSumB=0;this.nCur=this.nMin;this.loopBench=(!!e);return true},benchStop:function(){this.nCur=this.nMax;return true},update:function(c){a.supClass.update.call(this,c);if(this.nCur<this.nMax){this.dtSumB+=c;if(this.dtSumB>=0.2){this.dtSumB=0;this.curScene.addItem();this.nCur++;var e=(this.height()-this.marginFormula*2)/60;this.fpsData.push(e*this.fps);if(this.nCur>=this.nMax){if(!!this.loopBench){this.nCur=this.nMin;this.fpsData.length=0}}}}return true},drawFormula:function(q){q.save();var j=this.marginFormula,l=this.height()-this.marginFormula;var e=this.width()-this.marginFormula*2,k=this.height()-this.marginFormula*2;q.beginPath();q.strokeStyle="black";q.fillStyle="black";for(var g=0;g<6;g++){q.beginPath();q.moveTo(j,this.marginFormula+g*k/6);q.lineTo(j+e,this.marginFormula+g*k/6);q.stroke()}q.beginPath();q.moveTo(j,this.marginFormula);q.lineTo(j,l);q.lineTo(this.width()-this.marginFormula,l);q.stroke();q.fillText("60 fps",j-20,this.marginFormula-10);q.fillText(""+this.nMax,this.width()-this.marginFormula-20,l+20);q.beginPath();q.strokeStyle="red";var m=e/(this.nMax-this.nMin);if(this.fpsData.length>0){q.moveTo(j,l-this.fpsData[0]);for(var g=1;g<this.fpsData.length;g++){q.lineTo(j+g*m,l-this.fpsData[g])}}q.stroke();q.restore()},draw:function(e){a.supClass.draw.call(this,e);if(this.formula){this.drawFormula(e)}}});hotjs.Util.BenchLab=a})();(function(){var a=function(){hotjs.base(this);this.subnodes=[];this.param={width:300,height:400,margin:20,padding:10,rows:1,cols:1,dir:0}};hotjs.inherit(a,hotjs.Node,{addNode:function(b){a.supClass.addNode.call(this,b);this.updateLayout();return this},setParam:function(c){for(var b in c){this.param[b]=c[b]}if(this.param.dir==0){this.setMoveable(true,false)}else{this.setMoveable(false,true)}this.updateLayout();return this},fixPos:function(){if(this.pos[0]>0){this.pos[0]=0}if(this.pos[1]>0){this.pos[1]=0}var b=this.container.width()-this.size[0];var c=this.container.height()-this.size[1];if(this.pos[0]<b){this.pos[0]=b}if(this.pos[1]<c){this.pos[1]=c}},onTouchEnd:function(f){a.supClass.onTouchEnd.call(this,f);var c=this.pos;var j=this.param;if(j.dir==0){var i=Math.floor(this.pos[0]/j.width)*j.width;var e=i+j.width;if(e>=j.width){e=0}if(this.gesture[0]<=0){c=[i,c[1]]}else{c=[e,c[1]]}}else{var g=Math.floor(this.pos[1]/j.height)*j.height;var b=g+j.height;if(b>j.height){b=0}if(this.gesture[1]<=0){c=[c[0],g]}else{c=[c[0],b]}}hotjs.Anim.create(this,"MoveTo",{to:c,duration:0.3}).play()},updateLayout:function(){var t=this.subnodes;var m=this.param;var A=m.margin||0;var z=m.padding||0;var x=m.spacing||0;var f=m.rows||1;var j=m.cols||1;var q=m.dir?1:0;var g=m.width||300;g-=A*2;var y=m.height||400;y-=A*2;var b=g/j,k=y/f;var B=0,l=0;for(var v=0,e=0,c=0;v<t.length;v++){var r=t[v];r.pos[0]=b*(c+j*B)+A*(1+B*2)+(b-r.size[0])/2;r.pos[1]=k*(e+f*l)+A*(1+l*2)+(k-r.size[1])/2;if(++c>=j){c=0;if(++e>=f){e=0;if(q){l++}else{B++}}}}B++;l++;if(c==0&&e==0){if(q){if(l>1){l--}}else{if(B>1){B--}}}this.size[0]=(b*j+A*2)*B;this.size[1]=(k*f+A*2)*l;return this},draw:function(F){F.save();var A=this.subnodes;var v=this.param;var G=v.margin||0;var E=v.padding||0;var C=v.spacing||0;var l=v.rows||1;var q=v.cols||1;var z=v.dir?1:0;var g=v.width||300;g-=G*2;var I=v.height||400;I-=G*2;var b=g/q,r=I/l;for(var B=0,f=0,e=0,H=0,t=0;B<A.length;B++){var k=b*(e+q*H)+G*(1+H*2)+C;var j=r*(f+l*t)+G*(1+t*2)+C;var m=b-C*2;var D=r-C*2;if(!!this.bgcolor){F.fillStyle=this.bgcolor;F.fillRect(k,j,m,D)}if(!!this.color){F.strokeStyle=this.color;F.strokeRect(k,j,m,D)}if(++e>=q){e=0;if(++f>=l){f=0;if(z){t++}else{H++}}}}F.restore();return this}});hotjs.ShowBoard=a})();hotjs.domUI=hotjs.domUI||{};(function(){var e=function(f){var g=f;if(typeof g=="string"){g=document.getElementById(g)}if(typeof g=="object"&&g&&g.parentNode){g.parentNode.removeChild(g)}};var a=function(r,q){var f=r;if(typeof f=="string"){f=document.getElementById(f)}q=q||"bottom";var k=$(f),t=k.width(),j=k.height();var l=$(window).width(),g=$(window).height();var i={top:f.style.top,left:f.style.left};var m={};if(q.indexOf("top")>=0){m.top=-j-20+"px"}if(q.indexOf("left")>=0){m.left=-j-20+"px"}if(q.indexOf("bottom")>=0){m.top=g+"px"}if(q.indexOf("right")>=0){m.left=l+"px"}if(f.style.display=="none"){k.css(m).show().animate(i,"normal","swing",function(){})}else{k.animate(m,"normal","swing",function(){k.hide().css(i)})}};var c=function(g,k,j){if(!g){e("hotjs_splash_win");return}var m=document.getElementById("hotjs_splash_win");if(!m){m=document.createElement("div");m.setAttribute("id","hotjs_splash_win");m.style.position="absolute";m.style.display="none";document.body.appendChild(m)}var l=$(m);if(typeof k=="string"){m.innerHTML=("<table style='width:100%;height:100%;'><tr><td class='m'>"+k+"<br/><div id='hotjs_res_loading_win'></div></td></tr></table>")}if(typeof j=="string"){m.style=j}else{if(typeof j=="object"){l.css(j)}}var f=window.innerWidth,i=window.innerHeight;l.css({margin:"0px",padding:"0px",top:"0px",left:"0px",width:f+"px",height:i+"px","text-align":"center","vertical-align":"middle",position:"absolute","z-index":"999",display:"block"})};var b=function(G,z,B,D,E){G=G||"&nbsp;";z=z||"&nbsp;";D=D||{};B=B||{};E=E||"bottom";var t="DLG"+Date.now();var j=t+"X";var x=document.createElement("div");document.body.appendChild(x);var g=$(x);g.attr({id:t,"class":"dialog"}).css({position:"absolute",display:"none"});var F="";for(var A in B){var l=t+A;F+="<button class='dialog' id='"+l+"' v='"+A+"'>"+hotjs.i18n.get(A)+"</button> "}x_img="<img id='"+j+"' class='dlgx clickable' src='"+resources.getXPng()+"'>";x.innerHTML="<table class='dialog' cellspacing='0' cellpadding='0'><tr><td class='dlg00'></td><td class='dlg01 m'></td><td class='dlg02'>"+x_img+"</td></tr><tr><td class='dlg10'></td><td class='dlg11 m'>"+G+"</td><td class='dlg12'></td></tr><tr><td class='dlg10'></td><td class='dlg11 m'><div class='dlg11'>"+z+"</div></td><td class='dlg12'></td></tr><tr><td class='dlg10'></td><td class='dlg11 m'>"+F+"</td><td class='dlg12'></td></tr><tr><td class='dlg20'></td><td class='dlg21'></td><td class='dlg22'></td></tr></table>";var q=g.width(),C=g.height();var f=$(window).width(),v=$(window).height();var r={top:(v-C)/2+"px",left:(f-q)/2+"px"};for(var y in D){r[y]=D[y]}var m={};if(E.indexOf("top")>=0){m.top=-C-20+"px"}else{if(E.indexOf("bottom")>=0){m.top=v+"px"}else{m.top=r.top}}if(E.indexOf("left")>=0){m.left=-C-20+"px"}else{if(E.indexOf("right")>=0){m.left=f+"px"}else{m.left=r.left}}x.popup=function(){g.css(m).show().animate(r,"normal","swing",function(){})};x.dismiss=function(){g.animate(m,"normal","swing",function(){if(x&&x.parentNode){x.parentNode.removeChild(x)}})};$("img#"+j).on("click",x.dismiss);for(var A in B){var l=t+A;$("button#"+l).on("click",function(){var k=$(this).attr("v");var w=B[k];if(w()){x.dismiss()}})}x.popup();return x};hotjs.domUI={pngX:function(){return resources.getXPng()},dismiss:e,toggle:a,showSplash:c,popupDialog:b}})();hotjs=hotjs||{};hotjs.i18n={defaultLang:"en",cookievalid:86400000,text:{},put:function(e,c){if(this.text[e]===undefined){this.text[e]={}}var a=this.text[e];for(var b in c){a[b]=c[b]}return this},extractLang:function(c){var e;for(var a in c){var b=c[a].split("=");if(b[0]==="lang"){e=b[1].length>2?(b[1].charAt(0)+b[1].charAt(1)):b[1]}}return e},getUrlLang:function(){if(window.location.search.length<2){return undefined}return this.extractLang(window.location.search.substring(1).split("&"))},getCookieLang:function(){return this.extractLang(document.cookie.split("; "))},getLang:function(){if(typeof this.lang!=="string"){if(typeof(this.lang=this.getUrlLang())==="string"){}else{if(typeof(this.lang=this.getCookieLang())==="string"){}else{if(typeof(this.lang=navigator.language)==="string"){}else{if(typeof(this.lang=navigator.userLanguage)==="string"){}else{this.lang=this.defaultLang}}}}if(this.lang.length>2){this.lang=this.lang.charAt(0)+this.lang.charAt(1)}}return this.lang},setLang:function(f,a){this.lang=f;if(a){var e=window.location,b=new Date(),c=b.getTime();c+=this.cookievalid;b.setTime(c);document.cookie="lang="+f+";path="+e.pathname+";domain="+e.host+";expires="+b.toGMTString()}return this},get:function(a){var b=a.split("."),e=this.getLang(),c=this.text[e];while(typeof c!=="undefined"&&b.length>0){c=c[b.shift()]}return typeof c==="undefined"?e+"."+a:c},t1:function(c){if(typeof c==="object"&&c instanceof Element){var b=$(c),a=b.attr("i18n");b.removeClass("I18N");if(typeof a==="undefined"){a=b.text()}b.attr("i18n",a).text(this.get(a))}return this},translate:function(b){var c=this.getLang();if(typeof this.text[c]==="undefined"){resources.load("lang/"+c+".lang.js");return this}if(typeof b==="undefined"){b=$("[I18N]");$(".I18N").each(function(){if(!$.contains(b,this)){b=b.add(this)}})}if(b instanceof jQuery){for(var a in b){this.t1(b[a])}}else{this.t1(b)}return this}};hotjs=hotjs||{};hotjs.AI=hotjs.AI||{};(function(){var g=function(){hotjs.base(this)};hotjs.inherit(g,hotjs.Class,{init:function(i){},judge:function(i){},solve:function(i){return{}},reset:function(){},exit:function(){}});var b=function(){hotjs.base(this);this.data=[];this.mapping=[]};hotjs.inherit(b,g,{init:function(i,k,j){this.data=hotjs.Matrix.create(i,k,j);this.resetMapping();return this},setValue:function(i){this.data=hotjs.Matrix.setValue(this.data,i);return this},rows:function(){return this.data.length},resetMapping:function(){var v=this.data;var x=[];for(var t=0,k=v.length;t<k;t++){var w=v[t],q=[];for(var l=0,y=w.length;l<y;l++){q.push([l,t])}x.push(q)}this.mapping=x;return this},clone:function(){var i=new (this.constructor)();i.data=hotjs.Matrix.copy(this.data);i.mapping=hotjs.Matrix.copy(this.mapping);return i},copy:function(i){this.data=hotjs.Matrix.copy(i.data);this.mapping=hotjs.Matrix.copy(i.mapping);return this},getData:function(){return this.data},getMapping:function(){return this.mapping},importData:function(i){this.data=hotjs.Matrix.copy(i);this.resetMapping();return this},importDataFromString:function(j,k,i){this.data=hotjs.Matrix.fromString(j,k,i);this.resetMapping();return this},toString:function(j,i){return hotjs.Matrix.toString(this.data,j,i)},exchangeValue:function(y,w){var t=this.data;for(var q=0,k=t.length;q<k;q++){var v=t[q];for(var l=0,x=v.length;l<x;l++){if(v[l]==y){v[l]=w}else{if(v[l]==w){v[l]=y}}}}return this},countValue:function(l){var z=0;var w=this.data;for(var t=0,k=w.length;t<k;t++){var x=w[t];for(var q=0,y=x.length;q<y;q++){if(x[q]==l){z++}}}return z},setValueByPos:function(i,k,j){this.data[k][i]=j;return this},getValuebyPos:function(i,j){return this.data[j][i]},getPosByValue:function(l){var x=[];var w=this.data;for(var t=0,k=w.length;t<k;t++){var y=w[t];if(Number(y.join(""))===0){continue}for(var q=0,z=y.length;q<z;q++){if(y[q]===l){x.push([q,t])}}}return x},inverse:function(){this.data=hotjs.Matrix.inverse(this.data);this.mapping=hotjs.Matrix.inverse(this.mapping);return this},flipLeftRight:function(){var z=[],k=[];var l=this.data,w=this.mapping;for(var y=0,v=l.length;y<v;y++){var C=l[y],B=[],r=w[y],A=[];for(var x=0,q=C.length;x<q;x++){B.push(C[q-1-x]);A.push(r[q-1-x])}z.push(B);k.push(A)}this.data=z;this.mapping=k;return this},flipUpDown:function(){var k=[],j=[];var m=this.data,q=this.mapping;for(var l=m.length-1;l>=0;l--){k.push(m[l]);j.push(q[l])}this.data=k;this.mapping=j;return this},leanRight45:function(){var z=[],k=[];var l=this.data,v=this.mapping;var r=l.length,q=l[0].length;var w=r+q-1;for(var y=0;y<w;y++){var B=[],A=[];for(var x=0;x<=y;x++){if((y-x)<r&&x<q){B.push(l[y-x][x]);A.push(v[y-x][x])}}z.push(B);k.push(A)}this.data=z;this.mapping=k;return this},leanLeft45:function(){var z=[],k=[];var l=this.data,v=this.mapping;var r=l.length,q=l[0].length;var w=r+q-1;for(var y=0;y<w;y++){var B=[],A=[];for(var x=y;x>=0;x--){if((y-x)<r&&x<q){B.push(l[y-x][q-1-x]);A.push(v[y-x][q-1-x])}}z.push(B);k.push(A)}this.data=z;this.mapping=k;return this}});var f=function(){hotjs.base(this);this.char_style={level:1,think_time:500,attack_factor:1.2}};hotjs.inherit(f,g,{setCharStyle:function(i){this.char_style={level:i.level,think_time:i.think_time,attack_factor:i.attack_factor};return this},getCharStyle:function(){return this.char_style}});var c=function(){hotjs.base(this);this.patterns=[];this.char_style={level:1,think_time:500,attack_factor:1.2}};hotjs.inherit(c,f,{genPattern:function a(k){if(k==undefined){k=""}if(k.length<5){var i=a(k+"2"),j=a(k+".");while(s=j.shift()){i.push(s)}return i}return[k]},initPattern:function(){var k=this.genPattern();for(var m=k.length-1;m>=0;m--){var t=k[m];var v=0;var r=[];for(var l=t.length-1;l>=0;l--){if(t[l]=="2"){v++}else{r.push(l)}}if(v>=1){var q=[t,v,Math.pow(10,(v-1)),r];this.patterns.push(q)}else{}}this.addPattern([".2222.",0,5000,[0,5]]);this.addPattern([".222.",3,500,[0,4]]);this.addPattern([".2.2.",2,50,[2,0,4]]);return this},addPattern:function(l){var m=this.patterns;for(var j=m.length-1;j>=0;j--){var k=m[j];if(k[0]==l[0]){k[2]=l[2];k[3]=l[3];return this}}this.patterns.push(l);return this},setColor:function(m){m=""+m;var l=this.patterns;for(var j=l.length-1;j>=0;j--){var k=l[j];if(k[0].indexOf(m)==-1){if(m=="1"){k[0]=k[0].replace(/2/g,m)}else{k[0]=k[0].replace(/1/g,m)}}}return this},findHits:function(l,A){var R=this.patterns;var J=[];J.push(l);J.push(l.clone().inverse());J.push(l.clone().leanRight45());J.push(l.clone().leanLeft45());var w=hotjs.Matrix.setValue(hotjs.Matrix.copy(l.getData()),0);var y=[];for(var K=0;K<J.length;K++){var q=J[K].getData();var M=J[K].getMapping();var F=hotjs.Matrix.setValue(hotjs.Matrix.copy(q),0);for(var N=q.length-1;N>=0;N--){var D=q[N];var I=D.join("");var P=F[N];var Q=M[N];for(var L=R.length-1;L>=0;L--){var H=R[L];var v=H[0];var O=H[1];var B=H[2]*A;var m=H[3];var G=-1;while((G=I.indexOf(v,G+1))!=-1){if(O==5){var C=[];for(var E=4;E>=0;E--){C.push(Q[G+E])}y.push(C)}else{for(var E=m.length-1;E>=0;E--){var z=G+m[E];if(D[z]=="."){P[z]+=B}}}}}for(var L=P.length-1;L>=0;L--){var t=Q[L];w[t[1]][t[0]]+=P[L]}}}return{hitRating:w,winHits:y}},getBestMove:function(q){var m=Math.floor(q.length/2);var A=m,z=m,k=1;for(var v=q.length-1;v>=0;v--){var l=q[v];for(var t=l.length-1;t>=0;t--){var w=l[t];if(w>k){A=t;z=v;k=w}}}return[A,z,k]},getTopMoves:function(x,B){var q=Math.floor(x.length/2);var m=[[q,q,1]];for(var z=x.length-1;z>=0;z--){var l=x[z];for(var y=l.length-1;y>=0;y--){var A=l[y];var v=[y,z,A];var t=m.length;for(var w=0;w<t;w++){if(A>m[w][2]){m.splice(w,0,v);break}}if(m.length==t){if(t<B){m.push(v)}}if(m.length>B){m.pop()}}}return m},solve:function(r){var m=new hotjs.AI.Matrix();if(Array.isArray(r)){m.importData(r)}else{m.importDataFromString(r)}var j=this.findHits(m,this.char_style.attack_factor);var k=this.findHits(m.clone().exchangeValue("1","2"),1);var i=hotjs.Matrix.add(j.hitRating,k.hitRating);var l=this.getTopMoves(i,5);var q=(l.length>0)?l[0]:[Math.floor(m.rows()/2),Math.floor(m.rows()/2),1];return{myWinHits:j.winHits,peerWinHits:k.winHits,bestMove:q,topMoves:l,hitRating:i}},deepThinking:function(B,q){if(typeof q=="undefined"){q=this.char_style.level-1}var z=new hotjs.AI.Matrix();if(Array.isArray(B)){z.importData(B)}else{z.importDataFromString(B)}var w=this.findHits(z,this.char_style.attack_factor);var t=this.findHits(z.clone().exchangeValue("1","2"),1);var j=hotjs.Matrix.add(w.hitRating,t.hitRating);var v=this.getTopMoves(j,5);var y=(v.length>0)?v[0]:[Math.floor(z.rows()/2),Math.floor(z.rows()/2),1];var r=(w.winHits.length==0)&&(t.winHits.length==0);var k=(y[2]<10000);if(r&&k&&(q>1)){for(var m=0;m<v.length;m++){var l=v[m];var x=z.clone();x.setValueByPos(l[0],l[1],(x.countValue("1")<=x.countValue("2")?"1":"2"));var A=this.deepThinking(x.data,q-1);if(A.myWinHits.length>0){l[2]+=5000}else{if(A.peerWinHits.length>0){l[2]-=5000}else{l[2]+=A.bestMove[2]/2}}j[l[1]][l[0]]=l[2]}v.sort(function(C,i){if(C[2]>i[2]){return -1}else{if(C[2]<i[2]){return 1}}return 0})}return{myWinHits:w.winHits,peerWinHits:t.winHits,bestMove:y,topMoves:v,hitRating:j}},solveDeep:function(l){var k=Date.now();var i=this.deepThinking(l,this.char_style.level);var j=Date.now()-k;return i}});var e=function(){hotjs.base(this)};hotjs.inherit(e,g,{solve:function(j){var i=j.matrix;var m=j.from;var l=j.to;var k=[];return k}});hotjs.AI.BasicAI=g;hotjs.AI.Matrix=b;hotjs.AI.GomokuAI=c;hotjs.AI.PathFinder=e})();